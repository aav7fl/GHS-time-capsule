/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};
f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.avpw_jQuery=a.avpw$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
/*
 * jQuery miniColors: A small color selector
 *
 * Copyright 2011 Cory LaViska for A Beautiful Site, LLC. (http://abeautifulsite.net/)
 *
 * Dual licensed under the MIT or GPL Version 2 licenses
 *
*/(function(e){e.miniColors=function(t){var n=this,r=function(t){var n=e('<div style="display: none;" class="miniColors-selector"></div>');return n.append('<div class="miniColors-colors" style="background-color: #FFF;"><div class="miniColors-colorPicker"><div class="miniColors-colorPicker-inner"></div></div></div>').append('<div class="miniColors-hues"><div class="miniColors-huePicker"></div></div>'),n.find(".miniColors-colors").css("backgroundColor","#"+m({h:t.h,s:100,b:100})),f(n,t),n.bind("selectstart",function(){return!1}),n.data("hsb",t),n},i=function(e,t){},s=function(t){var n=!1,r;e(document).bind("mousedown.miniColors touchstart.miniColors",function(i){n=!0;var s=e(i.target).parents().andSelf();s.hasClass("miniColors-colors")&&(i.preventDefault(),r="colors",u(t,i)),s.hasClass("miniColors-hues")&&(i.preventDefault(),r="hues",a(t,i));if(s.hasClass("miniColors-selector")){i.preventDefault();return}if(s.hasClass("miniColors"))return;t.trigger("clickOutsideBounds")}),e(document).bind("mouseup.miniColors touchend.miniColors",function(e){e.preventDefault(),n=!1,r=undefined}).bind("mousemove.miniColors touchmove.miniColors",function(e){e.preventDefault(),n&&(r==="colors"&&u(t,e),r==="hues"&&a(t,e))})},o=function(){e(document).unbind(".miniColors")},u=function(e,t){var n={x:t.pageX,y:t.pageY},r=e.find(".miniColors-colors").offset();t.originalEvent.changedTouches&&(n.x=t.originalEvent.changedTouches[0].pageX,n.y=t.originalEvent.changedTouches[0].pageY),n.x=n.x-r.left-5,n.y=n.y-r.top-5,n.x<=-5&&(n.x=-5),n.x>=144&&(n.x=144),n.y<=-5&&(n.y=-5),n.y>=144&&(n.y=144);var i=Math.round((n.x+5)*.67);i<0&&(i=0),i>100&&(i=100);var s=100-Math.round((n.y+5)*.67);s<0&&(s=0),s>100&&(s=100);var o=e.data("hsb");o.s=i,o.b=s,l(e,o,!0)},a=function(e,t){var n={y:t.pageY},r=e.find(".miniColors-colors").offset();t.originalEvent.changedTouches&&(n.y=t.originalEvent.changedTouches[0].pageY),n.y=n.y-r.top-1,n.y<=-1&&(n.y=-1),n.y>=149&&(n.y=149);var i=Math.round((150-n.y-1)*2.4);i<0&&(i=0),i>360&&(i=360);var s=e.data("hsb");s.h=i,l(e,s,!0)},f=function(e,t){var n=c(t),r=e.find(".miniColors-colorPicker");r.css("top",n.y+"px").css("left",n.x+"px").show();var i=p(t),s=e.find(".miniColors-huePicker");s.css("top",i.y+"px").show()},l=function(e,t,n){f(e,t),e.data("hsb",t);var r=m(t);n&&e.trigger("updateInput",{hex:r}),e.find(".miniColors-colors").css("backgroundColor","#"+m({h:t.h,s:100,b:100})),e.trigger("setColor",{hex:r})},c=function(e){var t=Math.ceil(e.s/.67);t<0&&(t=0),t>150&&(t=150);var n=150-Math.ceil(e.b/.67);return n<0&&(n=0),n>150&&(n=150),{x:t-5,y:n-5}},p=function(e){var t=150-e.h/2.4;return t<0&&(h=0),t>150&&(h=150),{y:t-1}},d=function(e){var t={},n=Math.round(e.h),r=Math.round(e.s*255/100),i=Math.round(e.b*255/100);if(r===0)t.r=t.g=t.b=i;else{var s=i,o=(255-r)*i/255,u=(s-o)*(n%60)/60;n===360&&(n=0),n<60?(t.r=s,t.b=o,t.g=o+u):n<120?(t.g=s,t.b=o,t.r=s-u):n<180?(t.g=s,t.r=o,t.b=o+u):n<240?(t.b=s,t.r=o,t.g=s-u):n<300?(t.b=s,t.g=o,t.r=o+u):n<360?(t.r=s,t.g=o,t.b=s-u):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},v=function(e){var t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)],n,r=t.length,i;for(n=0;n<r;n++)i=t[n],i.length===1&&(t[n]="0"+i);return t.join("")},m=function(e){return v(d(e))};return n.setSelectorColor=l,n.buildSelector=r,n.bindSelectorEvents=s,n.unBindSelectorEvents=o,n}})(avpw_jQuery);
//fgnass.github.com/spin.js#v1.2.2
/**
 * Modified spin.js: some utility methods replaced
 * with Feather analogs, and adding id param for styling
 * (no positioning via style)
 * 
 * Use as new AV.Spinner()
 */(function(e,t,n){function s(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function o(e,t,n){return n&&!n.parentNode&&o(e,n),e.insertBefore(t,n||null),e}function a(e,t,n,s){var o=["opacity",t,~~(e*100),n,s].join("-"),a=.01+n/s*100,f=Math.max(1-(1-e)/t*(100-a),e),l=i.substring(0,i.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return r[o]||(u.insertRule("@"+c+"keyframes "+o+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",0),r[o]=1),o}function f(e,t){for(var n in t)e.style[AV.support.getVendorProperty(n)||n]=t[n];return e}function l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}var r={},i,u=function(){var e=s("style");return o(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),c=function d(e){if(!this.spin)return new d(e);this.opts=l(e||{},d.defaults,h)},h=c.defaults={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:.25,fps:20},p=c.prototype={spin:function(e){this.stop();var t=this,n=t.el=s(),r,u;t.opts.id&&(t.el.id=t.opts.id),e&&o(e,n,e.firstChild),n.setAttribute("aria-role","progressbar"),t.lines(n,t.opts);if(!i){var a=t.opts,f=0,l=a.fps,c=l/a.speed,h=(1-a.opacity)/(c*a.trail/100),p=c/a.lines;(function d(){f++;for(var e=a.lines;e;e--){var r=Math.max(1-(f+e*p)%c*h,a.opacity);t.opacity(n,a.lines-e,r,a)}t.timeout=t.el&&setTimeout(d,~~(1e3/l))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this}};p.lines=function(e,t){function u(e,r){return f(s(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.width>>1)+"px"})}var n=0,r;for(;n<t.lines;n++)r=f(s(),{position:"absolute",top:1+~(t.width/2)+"px",opacity:t.opacity,animation:i&&a(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&o(r,f(u("#000","0 0 4px #000"),{top:"2px"})),o(e,o(r,u(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},p.opacity=function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)},function(){var e=f(s("group"),{behavior:"url(#default#VML)"}),t;if(!AV.support.getVendorProperty("transform")&&e.adj){for(t=4;t--;)u.addRule(["group","roundrect","fill","stroke"][t],"behavior:url(#default#VML)");p.lines=function(e,t){function i(){return f(s("group",{coordsize:r+" "+r,coordorigin:-n+" "+ -n}),{width:r,height:r})}function c(e,r,a){o(u,o(f(i(),{rotation:360/t.lines*e+"deg",left:~~r}),o(f(s("roundrect",{arcsize:1}),{width:n,height:t.width,left:t.radius,top:-t.width>>1,filter:a}),s("fill",{color:t.color,opacity:t.opacity}),s("stroke",{opacity:0}))))}var n=t.length+t.width,r=2*n,u=i(),a=~(t.length+t.radius+t.width)+"px",l;if(t.shadow)for(l=1;l<=t.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=t.lines;l++)c(l);return o(f(e,{zoom:1}),u)},p.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}else i=AV.support.getVendorProperty("animation")}(),AV.Spinner=c})(window,document);"undefined"==typeof AV&&(AV={});
(function(a){var b=a.desktop={};b.saveBlock=function(){return['<div class="avpw_mode_action avpw_mode_action_right">','<a id="avpw_save_button" href="#Save" class="avpw_button avpw_primary_button">'+AV.getLocalizedString("Save")+"</a>",'<form id="avpw_save_form" enctype="multipart/form-data" action="'+AV.build.imgrecvServer+'" method="POST" target="avpw_img_submit_target">','<input id="avpw_save_form_posturl" type="hidden" name="posturl" value=""></input><input id="avpw_save_form_postdata" type="hidden" name="postdata" value=""></input><input id="avpw_save_form_apikey" type="hidden" name="apikey" value=""></input><input id="avpw_save_form_data" type="hidden" name="file" value=""></input><input id="avpw_save_form_sessionid" type="hidden" name="sessionid" value=""></input><input id="avpw_save_form_actionlist" type="hidden" name="actionlist" value=""></input><input id="avpw_save_form_origurl" type="hidden" name="origurl" value=""></input><input id="avpw_save_form_hiresurl" type="hidden" name="hiresurl" value=""></input><input type="hidden" name="encodedas" value="base64text"></input><input id="avpw_save_form_fileformat" type="hidden" name="fileformat" value=""></input><input id="avpw_save_form_jpgquality" type="hidden" name="jpgquality" value=""></input><input id="avpw_save_form_debug" type="hidden" name="debug" value=""></input><input id="avpw_save_form_asyncsave" type="hidden" name="asyncsave" value=""></input><input id="avpw_save_form_signature" type="hidden" name="signature" value=""></input><input id="avpw_save_form_timestamp" type="hidden" name="timestamp" value=""></input><input id="avpw_save_form_usecustomfileexpiration" type="hidden" name="usecustomfileexpiration" value=""></input></form></div>'].join("")};b.closeButton=
function(c){return["<div "+(c.id?'id="'+c.id+'" ':"")+'title="'+c.text+'">',"<div "+(c.id?'id="'+c.id+'_inner" ':"")+'class="avpw_close_button '+c.className+'">','<div class="avpw_close_inner">&times;</div></div></div>'].join("")};b.cancelButton=function(c){return['<a href="#Back" id="'+c.id+'" class="avpw_button avpw_back_button">',AV.getLocalizedString(c.label),"</a>"].join("")};b.inAppPurchaseFrame=function(c){return""+('<iframe width="100%" height="170" class="avpw_popup_frame" id="avpw_purchase_frame" name="avpw_purchase_frame" src="'+
c.src+'" style="display: none;"></iframe>')};b.controls=function(c){return['<div id="avpw_fullscreen_bg" style="display: none;"></div><div style="display:none;" id="avpw_controls" class="avpw avpw_main_mode"><div id="avpw_tool_content_wrapper"><div id="avpw_tool_main_container" class="avpw_tool_pager"><a id="avpw_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_control_main_scroll_panel" class="avpw_clip"><div id="avpw_control_main_scrolling_region" class="avpw_scroll_strip"></div><div id="avpw_tools_pager"><ul></ul></div></div><a id="avpw_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a>',
c.internalSaveBlock,'</div><div id="avpw_tool_options_container" style="display:none;"><div id="avpw_tool_container"><div id="avpw_controlpanel_brightness" class="avpw_controlpanel avpw_tool_fixed avpw_tool_slider"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Brightness"),"</h2>",b.slider({id:"avpw_brightness_slider",divider:!0}),'</div><div id="avpw_controlpanel_contrast" class="avpw_controlpanel avpw_tool_fixed avpw_tool_slider"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Brightness"),"</h2>",b.slider({id:"avpw_contrast_slider",divider:!0}),'</div><div id="avpw_controlpanel_saturation" class="avpw_controlpanel avpw_tool_fixed avpw_tool_slider"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Saturation"),"</h2>",b.slider({id:"avpw_saturation_slider",divider:!0}),'</div><div id="avpw_controlpanel_warmth" class="avpw_controlpanel avpw_tool_fixed avpw_tool_slider"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Warmth"),"</h2>",b.slider({id:"avpw_warmth_slider",divider:!0}),'</div><div id="avpw_controlpanel_sharpness" class="avpw_controlpanel avpw_tool_fixed avpw_tool_slider"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Sharpness"),"</h2>",b.slider({id:"avpw_sharpness_slider",divider:!0}),'</div><div id="avpw_controlpanel_orientation" class="avpw_controlpanel avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Orientation"),'</h2><div class="avpw_tool_cutout_inner avpw_inset_background"><div class="avpw_tool_cutout_centered_orientation"><div class="avpw_inset_button_group avpw_inset_group avpw_span_2_buttons avpw_inset_group_first"><div id="avpw_rotate_left" class="avpw_inset_button avpw_inset_button_first"><div class="avpw_orientation_button_inner"></div></div><div id="avpw_rotate_right" class="avpw_inset_button avpw_inset_button_last"><div class="avpw_orientation_button_inner"></div></div></div><div class="avpw_inset_button_group avpw_inset_group avpw_inset_group_last avpw_span_2_buttons"><div id="avpw_flip_h" class="avpw_inset_button avpw_inset_button_first"><div class="avpw_orientation_button_inner"></div></div><div id="avpw_flip_v" class="avpw_inset_button avpw_inset_button_last"><div class="avpw_orientation_button_inner"></div></div></div><div class="avpw_inset_button_label avpw_label avpw_inset_group avpw_span_2_buttons avpw_inset_group_first">',
AV.getLocalizedString("Rotate"),'</div><div class="avpw_inset_button_label avpw_label avpw_inset_group avpw_span_2_buttons avpw_inset_group_last">',AV.getLocalizedString("Mirror"),'</div></div></div></div><div id="avpw_controlpanel_crop" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Crop"),'</h2><div class="avpw_tool_scroll"><a id="avpw_crop_presets_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_crop_presets_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_crop_presets_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_crop_presets_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div></div><div id="avpw_controlpanel_resize" class="avpw_controlpanel avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Resize"),'</h2><div class="avpw_tool_cutout_inner avpw_inset_background"><div class="avpw_tool_cutout_centered_resize"><div class="avpw_resize_form_block avpw_resize_width"><input class="avpw_text_input avpw_number_input" id="avpw_resize_width" type="text" value="640" maxlength="5"/><div class="avpw_label">',AV.getLocalizedString("Width"),'</div></div><div class="avpw_resize_form_block avpw_resize_constrain"><div  class="avpw_inset_group avpw_inset_button_group avpw_inset_group_first avpw_inset_group_last avpw_checkmark_button">',
'<div id="avpw_constrain_prop" class="avpw_inset_button avpw_inset_button_first avpw_inset_button_last" title="'+AV.getLocalizedString("Maintain proportions")+'">','<div class="avpw_lock_icon"><div class="avpw_lock_icon_top"><div class="avpw_lock_icon_top_inner"></div></div><div class="avpw_lock_icon_sep"></div><div class="avpw_lock_icon_bottom"></div></div></div></div></div><div class="avpw_resize_form_block avpw_resize_height"><input class="avpw_text_input avpw_number_input" id="avpw_resize_height" type="text" value="480" maxlength="5"/><div class="avpw_label">',
AV.getLocalizedString("Height"),'</div></div></div></div></div><div id="avpw_controlpanel_redeye" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Redeye"),'</h2><div class="avpw_tool_scroll"><a id="avpw_redeye_brushes_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_redeye_brushes_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_redeye_brushes_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_redeye_brushes_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div></div><div id="avpw_controlpanel_whiten" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Whiten"),'</h2><div class="avpw_tool_scroll"><a id="avpw_whiten_brushes_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_whiten_brushes_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_whiten_brushes_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_whiten_brushes_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div></div><div id="avpw_controlpanel_blemish" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Blemish"),'</h2><div class="avpw_tool_scroll"><a id="avpw_blemish_brushes_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_blemish_brushes_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_blemish_brushes_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_blemish_brushes_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div></div><div id="avpw_controlpanel_effects" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><div class="avpw_current_tool_icon_shadow avpw_advanced_chrome avpw_isa_basic_chrome"></div><h2 class="avpw_current_tool_icon avpw_advanced_chrome avpw_isa_basic_chrome"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Effects"),'</h2><div class="avpw_advanced_window"><div class="avpw_advanced_region"><div id="avpw_effects_effects" class="avpw_tool_scroll"><a id="avpw_filter_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_filter_body_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_filter_pack_scroll_region" class="avpw_scroll_strip"></div><div id="avpw_filter_body_scroll_region" class="avpw_scroll_strip" style="display: none;"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_filter_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div><div id="avpw_effects_options" class="avpw_tool_cutout_inner avpw_inset_background"><div class="avpw_tool_cutout_centered_fixed_size"><div class="avpw_effects_frame_container"><div  class="avpw_inset_group avpw_inset_button_group avpw_inset_button_group_first avpw_inset_button_group_last avpw_checkmark_button"><div id="avpw_effects_frame_toggle" class="avpw_inset_button avpw_inset_button_first avpw_inset_button_last"><div class="avpw_frame_toggle_icon"></div></div></div><div class="avpw_label">',
AV.getLocalizedString("Frame"),'</div></div><div class="avpw_advanced_slider">',b.slider({id:"avpw_effects_slider"}),'<div class="avpw_label">',AV.getLocalizedString("Intensity"),"</div></div></div></div></div></div>",b.advancedToolsSplitter(),'</div><div id="avpw_controlpanel_enhance" class="avpw_controlpanel avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Enhance"),'</h2><div class="avpw_tool_cutout_inner avpw_inset_background"><div class="avpw_tool_cutout_centered_enhance"><div class="avpw_inset_button_group avpw_inset_group avpw_inset_group_first avpw_inset_group_last avpw_span_4_buttons"><div class="avpw_inset_button avpw_inset_button_first"><div id="avpw_enhance_icon_one" class="avpw_enhance_button_inner">',
AV.getLocalizedString("Enhance"),'</div></div><div class="avpw_inset_button"><div id="avpw_enhance_icon_two" class="avpw_enhance_button_inner">',AV.getLocalizedString("Night"),'</div></div><div class="avpw_inset_button"><div id="avpw_enhance_icon_three" class="avpw_enhance_button_inner">',AV.getLocalizedString("Backlit"),'</div></div><div class="avpw_inset_button avpw_inset_button_last"><div id="avpw_enhance_icon_four" class="avpw_enhance_button_inner">',AV.getLocalizedString("Balance"),'</div></div></div><div class="avpw_inset_group avpw_inset_group_first avpw_inset_group_last avpw_span_4_buttons"><div class="avpw_inset_button_label avpw_label">',
AV.getLocalizedString("Enhance"),'</div><div class="avpw_inset_button_label avpw_label">',AV.getLocalizedString("Night"),'</div><div class="avpw_inset_button_label avpw_label">',AV.getLocalizedString("Backlit"),'</div><div class="avpw_inset_button_label avpw_label">',AV.getLocalizedString("Balance"),'</div></div></div></div></div><div id="avpw_controlpanel_drawing" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Draw"),'</h2><div id="avpw_drawing_brushes" class="avpw_tool_half_height avpw_tool_double_scroll avpw_tool_scroll"><a id="avpw_drawing_brushes_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_drawing_brushes_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_drawing_brushes_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_drawing_brushes_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div><div class="avpw_clip_splitter"></div><div id="avpw_drawing_colors" class="avpw_tool_half_height avpw_tool_scroll"><a id="avpw_drawing_colors_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span></a><div id="avpw_drawing_colors_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_drawing_colors_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_drawing_colors_rghtArrow" class="avpw_next avpw_bookend"><span class="avpw_arrow_icon"></span></a></div></div><div id="avpw_controlpanel_overlay" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><div class="avpw_current_tool_icon_shadow"></div><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Stickers"),'</h2><div class="avpw_tool_scroll"><a id="avpw_overlay_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"><span class="fader"></span></div></a><div id="avpw_overlay_images_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_overlay_pack_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_overlay_roll"></div><div id="avpw_overlay_images_scroll_region" class="avpw_overlay_strip avpw_scroll_strip" style="display: none;"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_overlay_rghtArrow" class="avpw_next avpw_bookend"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div></div><div id="avpw_controlpanel_text" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',
AV.getLocalizedString("Text"),'</h2><div id="avpw_text_colors" class="avpw_tool_scroll avpw_tool_half_height"><a id="avpw_text_colors_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span></a><div id="avpw_text_colors_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_text_colors_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_text_colors_rghtArrow" class="avpw_next avpw_bookend"><span class="avpw_arrow_icon"></span></a></div><div class="avpw_tool_half_height"><button id="avpw_add_text" class="avpw_button">',
AV.getLocalizedString("Add Text"),'</button><input type="text" id="avpw_text_area" name="avpw_text_area" class="avpw_text_input" /><input type="hidden" id="avpw_text_font" value="sans-serif" /><input type="hidden" id="avpw_text_font_size" value="60" /></div></div><div id="avpw_controlpanel_textwithfont" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><h2 class="avpw_current_tool_icon"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Text"),'</h2><div id="avpw_textwithfont_colors" class="avpw_tool_scroll avpw_tool_half_height"><a id="avpw_textwithfont_colors_lftArrow" class="avpw_prev avpw_bookend"><span class="avpw_arrow_icon"></span></a><div id="avpw_textwithfont_colors_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_textwithfont_colors_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_shadowbar avpw_shadowbar_n"></div></div><a id="avpw_textwithfont_colors_rghtArrow" class="avpw_next avpw_bookend"><span class="avpw_arrow_icon"></span></a></div><div class="avpw_clip_splitter avpw_inset_background"></div><div class="avpw_tool_half_height avpw_tool_scroll"><div class="avpw_clip avpw_inset_background"><div class="avpw_tool_cutout_fixed"><div id="avpw_font_browser" class="avpw_inset_button_group avpw_inset_group avpw_inset_group_first"><div class="avpw_inset_button avpw_inset_button_first avpw_inset_button_last"><div class="avpw_dropdown_icon"><div class="avpw_dropdown_icon_inner"></div></div><div id="avpw_font_browser_preview" class="avpw_font_label avpw_label avpw_isa_dropdown_display"></div></div></div><div id="avpw_textwithfont_addtext" class="avpw_inset_button_group avpw_inset_group avpw_inset_group_last"><div class="avpw_inset_button_with_plus avpw_inset_button avpw_inset_button_first avpw_inset_button_last">',
AV.getLocalizedString("Add Text"),'</div></div></div></div></div></div><div id="avpw_controlpanel_frames" class="avpw_controlpanel avpw_tool_stretch avpw_tool_cutout"><div class="avpw_current_tool_icon_shadow avpw_advanced_chrome avpw_isa_basic_chrome"></div><h2 class="avpw_current_tool_icon avpw_advanced_chrome avpw_isa_basic_chrome"><div class="avpw_icon_image"></div>',AV.getLocalizedString("Frames"),'</h2><div class="avpw_advanced_window"><div class="avpw_advanced_region"><div id="avpw_frames_frames" class="avpw_tool_scroll"><a id="avpw_frames_lftArrow" class="avpw_prev avpw_bookend avpw_advanced_chrome avpw_isa_basic_chrome"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_frames_body_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_frames_body_scroll_region" class="avpw_scroll_strip avpw_scroll_frames_strip"></div><div class="avpw_top_rule"></div></div><a id="avpw_frames_rghtArrow" class="avpw_next avpw_bookend avpw_advanced_chrome avpw_isa_basic_chrome"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div><div id="avpw_frames_thickness" class="avpw_tool_half_height avpw_tool_advanced_half_height avpw_tool_double_scroll avpw_tool_scroll"><a id="avpw_frames_thickness_lftArrow" class="avpw_prev avpw_bookend avpw_advanced_chrome avpw_isa_advanced_chrome"><span class="avpw_arrow_icon"></span><div class="avpw_scroll_rule"></div></a><div id="avpw_frames_thickness_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_frames_thickness_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_top_rule"></div></div><a id="avpw_frames_thickness_rghtArrow" class="avpw_next avpw_bookend avpw_advanced_chrome avpw_isa_advanced_chrome"><div class="avpw_scroll_rule"></div><span class="avpw_arrow_icon"></span></a></div><div class="avpw_clip_splitter"></div><div id="avpw_frames_colors" class="avpw_tool_half_height avpw_tool_advanced_half_height avpw_tool_scroll"><a id="avpw_frames_colors_lftArrow" class="avpw_prev avpw_bookend avpw_advanced_chrome avpw_isa_advanced_chrome"><span class="avpw_arrow_icon"></span></a><div id="avpw_frames_colors_scroll_window" class="avpw_clip avpw_inset_background"><div id="avpw_frames_colors_scroll_region" class="avpw_scroll_strip"></div><div class="avpw_top_rule"></div></div><a id="avpw_frames_colors_rghtArrow" class="avpw_next avpw_bookend avpw_advanced_chrome avpw_isa_advanced_chrome"><span class="avpw_arrow_icon"></span></a></div></div></div>',
b.advancedToolsSplitter(),'</div></div><div class="avpw_mode_action avpw_mode_action_left">',b.cancelButton({id:"avpw_all_effects",label:"Cancel"}),b.cancelButton({id:"avpw_up_one_level",label:"Cancel"}),'</div><div class="avpw_mode_action avpw_mode_action_right"><a href="#Apply" id="avpw_apply_container" class="avpw_button avpw_primary_button">',AV.getLocalizedString("Apply"),'</a></div></div></div><div id="avpw_canvas_embed" class="avpw_canvas_background"></div><div id="avpw_footer"><div id="avpw_history"><a id="avpw_history_undo" class="avpw_button avpw_history_button avpw_history_button_first avpw_history_disabled"><span class="avpw_history_icon">Undo</span></a><a id="avpw_history_redo" class="avpw_button avpw_history_button avpw_history_button_last avpw_history_disabled"><span class="avpw_history_icon">Redo</span></a><div id="avpw_history_undo_blocker" class="avpw_history_blocker avpw_history_blocker_first"></div><div id="avpw_history_redo_blocker" class="avpw_history_blocker avpw_history_blocker_last"></div></div><p class="avpw_footer_text" id="avpw_size_indicator"></p><p class="avpw_footer_text avpw_powered_text">',
'<a href="'+AV.launchData.getWidgetURL+'" target="_blank">',AV.getLocalizedString("Powered by")+" ",'<span id="avpw_logo">&nbsp;</span></a></p></div><div id="avpw_messaging" style="display: none;"><div id="avpw_messaging_inner"></div><div id="avpw_messages" style="display: none;">',b.aviaryAppPopups(),"</div></div>",'<form style="display:none;" id="avpw_track_form" action="'+AV.build.imgtrackServer+'" method="GET" target="avpw_img_track_target">','<input id="avpw_track_form_action" type="hidden" name="action" value=""></input><input id="avpw_track_form_sessionid" type="hidden" name="sessionid" value=""></input><input id="avpw_track_form_apikey" type="hidden" name="apikey" value=""></input>',
'<input id="avpw_track_form_featherversion" type="hidden" name="featherversion" value="'+AV.build.version+'"></input>','<input id="avpw_track_form_data" type="hidden" name="toolusagedata" value=""></input></form></div>',b.closeButton({id:"avpw_control_cancel_pane",text:AV.getLocalizedString("Cancel")}),'<div id="avpw_img_submit_target_holder" style="position:absolute;top:0;left:0"></div><div id="avpw_img_track_target_holder" style="position:absolute;top:0;left:0"></div>',AV.buildHiddenFrame("avpw_img_submit_target_announcer",
"avpw_img_submit_target_announcer",AV.build.featherTargetAnnounce)].join("")};b.eggIcon=function(c){return['<div class="avpw_icon avpw_tool_icon" id="avpw_main_'+c.optionName+'" data-header="'+c.capOptionName+'" data-toolname="'+c.optionName+'">','<div class="avpw_icon_image avpw_tool_icon_image"><div class="avpw_tool_icon_inner"></div></div><div class="avpw_icon_waiter avpw_center_contents"></div>','<span class="avpw_icon_label avpw_label">'+c.capOptionName+"</span>","</div>"].join("")};b.emptyEggIcon=
function(){return""};b.genericScrollPanel=function(c){return['<div style="width: '+c.panelWidth+'px;" class="avpw_scroll_page '+c.panelClass+'">\n','<span class="avpw_scroll_page_inner">\n',c.panelHTML,"</span>\n</div>\n"].join("")};b.aviaryScrollPanel=function(c){return['<div style="width: '+c.panelWidth+'px;" class="avpw_scroll_page '+c.panelClass+'">\n','<span class="avpw_scroll_page_inner">\n<div class="avpw_info">','<a href="'+AV.launchData.getWidgetURL+'" target="_blank" class="avpw_button avpw_info_right">'+
AV.getLocalizedString("Get this editor")+"</a>\n",'<a href="'+AV.launchData.giveFeedbackURL+'" target="_blank" class="avpw_button avpw_info_left">'+AV.getLocalizedString("Give feedback")+"</a>\n",'<div class="avpw_info_inner"><a id="avpw_logo_large" href="http://www.aviary.com/" target="_blank">Aviary</a><p class="avpw_version_text">',"v"+AV.build.version,"</p></div></div></span></div>"].join("")};b.aviaryAppPopups=function(){return['<div id="avpw_aviary_beensaved" class="avpw_app_popup">\n','<p class="avpw_message_text">'+
AV.getLocalizedString("Your work was saved!")+"</p>",'<div class="avpw_message_buttons">\n','<a id="avpw_resume_aftersave" class="avpw_button" href="#Resume">'+AV.getLocalizedString("Resume")+"</a>\n",'<a id="avpw_close_aftersave" class="avpw_button avpw_primary_button" href="#Close">'+AV.getLocalizedString("Close")+"</a>",'</div>\n<br /><div class="avpw_center_contents">\n','<a class="avpw_button" href="'+AV.launchData.getWidgetURL+'" target="_blank">'+AV.getLocalizedString("Get this editor")+"</a>\n",
'</div>\n</div>\n<div id="avpw_resize_invalid" class="avpw_app_popup">\n<p class="avpw_message_text">',AV.getLocalizedString("Width and height must be greater than zero and less than the maximum({max}px)").replace("{max}",'<span id="avpw_resize_invalid_max_size"></span>'),'</p><div class="avpw_message_buttons">\n','<a id="avpw_resize_invalid_confirm" class="avpw_button" href="#Confirm">'+AV.getLocalizedString("OK")+"</a>\n",'</div>\n</div>\n<div id="avpw_purchase_pack" class="avpw_app_popup">\n',
b.closeButton({id:"avpw_purchase_pack_close",text:AV.getLocalizedString("Cancel")}),'<div id="avpw_purchase_pack_contents">\n</div>\n</div>\n<div id="avpw_resize_unlocked" class="avpw_app_popup">\n<p class="avpw_message_text">',AV.getLocalizedString("Are you sure? This can distort your image"),'</p><div class="avpw_message_buttons">\n','<a id="avpw_resize_unlocked_confirm" class="avpw_button" href="#Confirm">'+AV.getLocalizedString("OK")+"</a>\n",'<a id="avpw_resize_unlocked_cancel" class="avpw_button" href="#Confirm">'+
AV.getLocalizedString("Cancel")+"</a>\n",'</div>\n</div>\n<div id="avpw_aviary_quitareyousure" class="avpw_app_popup">','<p class="avpw_message_text">'+AV.getLocalizedString("Wait! You didn't save your work. Are you certain that you want to close this editor?")+"</p>",'<div class="avpw_message_buttons avpw_center_contents">\n','<a id="avpw_resume_editing" class="avpw_button" href="#Resume">'+AV.getLocalizedString("Resume")+"</a>\n",'<a id="avpw_close_nosave" class="avpw_button" href="#Close">'+AV.getLocalizedString("Close")+
"</a>\n",'<a id="avpw_close_save" class="avpw_button avpw_primary_button" href="#Save">'+AV.getLocalizedString("Save")+"</a>",'</div></div><div id="avpw_aviary_unsupported" class="avpw_app_popup"><p class="avpw_message_text">',AV.getLocalizedString("Please install {Adobe Flash Player} (version {min} or higher), or use a supported browser: {Chrome}, {Firefox}, {Safari}, {Opera}, or {Internet Explorer} (version 9 or higher).").replace("{Adobe Flash Player}",'<a href="http://get.adobe.com/flashplayer/" target="_blank">Adobe Flash Player</a>').replace("{min}",
AV.build.MINIMUM_FLASH_PLAYER_VERSION).replace("{Chrome}",'<a href="http://www.google.com/chrome/" target="_blank">Chrome</a>').replace("{Firefox}",'<a href="http://www.mozilla.org/firefox/" target="_blank">Firefox</a>').replace("{Safari}",'<a href="http://www.apple.com/safari/" target="_blank">Safari</a>').replace("{Opera}",'<a href="http://www.opera.com/" target="_blank">Opera</a>').replace("{Internet Explorer}",'<a href="http://www.beautyoftheweb.com/" target="_blank">Internet Explorer</a>'),'</p><div class="avpw_message_buttons avpw_center_contents">\n',
'<a id="avpw_close_unsupported" class="avpw_button" href="#Close">'+AV.getLocalizedString("Close")+"</a>\n","</div></div>"].join("")};b.scrollPanelPip=function(c){return'<li class="avpw_page avpw_is_navpip" pagenum="'+c.i+'" id="avpw_navpip_'+c.i+'">&bull;</li>\n'};b.slider=function(c){return['<div class="avpw_slider_container avpw_isa_slider_container"><div class="avpw_slider_bookend avpw_slider_bookend_left avpw_slider_label">-</div>','<div class="avpw_slider_positioned" id="'+c.id+'">','<div class="avpw_slider_positioned_inner"><div class="avpw_slider_bounds" ><div class="avpw_slider_goo"></div>',
c.divider?'<div class="avpw_slider_divider"></div>':"",'<a class="avpw_slider_handle"></a></div></div></div><div class="avpw_slider_bookend avpw_slider_bookend_right avpw_slider_label">+</div></div>'].join("")};b.zoomModeOverlay=function(){return['<div id="avpw_zoom_mode_overlay"><div id="avpw_zoom_mode_text"><h2 class="avpw_mode_warning">',AV.getLocalizedString("Zoom Mode"),"</h2>",AV.getLocalizedString("Click to release"),"</div></div>"].join("")};b.zoomControls=function(){return'<div id="avpw_zoom_container"><div id="avpw_zoom_button"><a href="#zoom" id="avpw_zoom_icon"></a></div><div class="avpw_zoom_slider_container avpw_isa_slider_container"><div id="avpw_zoom_slider"><a id="avpw_zoom_handle"></a></div></div></div><div class="avpw_shadowbar avpw_shadowbar_n"></div><div class="avpw_shadowbar avpw_shadowbar_s"></div><div class="avpw_shadowbar avpw_shadowbar_e"></div><div class="avpw_shadowbar avpw_shadowbar_w"></div>'};
b.presetIndicator=function(){return'<div class="avpw_preset_indicator_outer"><div class="avpw_preset_indicator"></div></div>'};b.cropPreset=function(c){return['<div class="avpw_preset_crop_icon avpw_preset_icon avpw_icon avpw_with_indicator avpw_isa_preset_crop" data-crop="'+c.label+'">',c.strict||c.labeled?"":b.cropPresetFlippedIndicator(),'<div class="avpw_preset_label avpw_label">',c.label,"</div>",b.presetIndicator(),"</div>"].join("")};b.cropPresetFlippedIndicator=function(){return'<div class="avpw_crop_preset_flipped_indicator_shadow"><div class="avpw_crop_preset_flipped_indicator_left"></div><div class="avpw_crop_preset_flipped_indicator_right"></div></div><div class="avpw_crop_preset_flipped_indicator"><div class="avpw_crop_preset_flipped_indicator_left"></div><div class="avpw_crop_preset_flipped_indicator_right"></div></div>'};
b.brushIconLarge=function(c){return['<div class="avpw_preset_icon avpw_icon avpw_with_indicator avpw_isa_preset_brush" data-size="'+c.size+'">','<div class="avpw_icon_image avpw_brush_size avpw_brush_size_'+c.size+'">',"</div>",b.presetIndicator(),"</div>"].join("")};b.brushIconSmall=function(c){return['<div class="avpw_preset_icon avpw_icon avpw_isa_preset_brush" data-size="'+c.size+'">','<div class="avpw_icon_image avpw_brush_size avpw_brush_size_'+c.size+'">',"</div></div>"].join("")};b.brushColorIcon=
function(c){return['<div class="avpw_preset_icon avpw_icon avpw_isa_preset_color" data-color="'+c.color+'">','<div class="avpw_preset_color_image" style="background: '+c.color+';">',"</div>",c.extra?c.extra:"","</div>"].join("")};b.magicColorIcon=function(){return'<div class="avpw_glow_accent"></div><div class="avpw_star_accent"></div>'};b.colorPickerIcon=function(){return'<div class="avpw_preset_icon avpw_icon avpw_isa_color_picker" data-color=""><div class="avpw_preset_color_image avpw_custom_color_image avpw_isa_color_feedback"></div></div>'};
b.colorPickerContainer=function(){return['<div class="avpw_dropdown_popup avpw_color_picker_dropdown_popup"><div class="avpw_dropdown_tail"></div><div class="avpw_color_picker_background"></div><div class="avpw_color_picker_preview avpw_isa_color_feedback"></div><a class="avpw_button avpw_color_picker_confirm">',AV.getLocalizedString("Set Color"),"</a></div>"].join("")};b.eraserIcon=function(){return['<div class="avpw_eraser_icon avpw_preset_icon avpw_icon"><div class="avpw_icon_image">',AV.getLocalizedString("Eraser"),
"</div></div>"].join("")};b.brushPreviewOverlay=function(){return'<div id="avpw_brush_preview_container" class="avpw_brush_preview"><canvas height="100" width="100" class="avpw_brush_preview_display"></canvas></div>'};b.frameThicknessIcon=function(c){var a=24-2*c.thickness+"px";return['<div class="avpw_preset_icon avpw_icon avpw_isa_preset_thickness" data-thickness="'+c.thickness+'">','<div class="avpw_preset_thickness_image" ','style="border-width: '+(c.thickness+"px")+";","width: "+a+";","height: "+
a+';"',"></div></div>"].join("")};b.fontGroupPopup=function(){return'<div id="avpw_font_popup" class="avpw_dropdown_popup" style="display: none;"><div class="avpw_dropdown_tail"></div><div class="avpw_dropdown_popup_inner"><ul class="avpw_dropdown_popup_list"></ul></div></div>'};b.fontGroupPopupItem=function(c){var a="";c.label&&c.label.toLowerCase&&(a="avpw_font_"+c.label.toLowerCase().replace(/\ /g,""));return['<li class="avpw_preset_font avpw_dropdown_popup_list_item avpw_isa_dropdown_item" data-value="'+
c.label+'">','<div class="avpw_font_image '+a+'">',c.label,"</div></li>"].join("")};b.fontSizePopup=function(){return'<div id="avpw_font_size_popup" class="avpw_dropdown_popup" style="display: none;"><div class="avpw_dropdown_tail"></div><div class="avpw_dropdown_popup_inner"><ul class="avpw_dropdown_popup_list"></ul></div></div>'};b.fontSizePopupItem=function(c){return['<li class="avpw_preset_font_size avpw_dropdown_popup_list_item avpw_isa_dropdown_item" data-value="'+c.value+'">',c.label,"</li>"].join("")};
b.textEntryOverlay=function(c){return['<div id="'+(c.id?c.id:"")+'" style="z-index:'+c.zIndex+';" class="avpw_textwithfont_overlay">','<canvas class="avpw_textwithfont_writer"></canvas><textarea class="avpw_textwithfont_entry" cols="20" rows="1" wrap="soft" spellcheck="false"></textarea><div class="avpw_textwithfont_overlay_size_handle"></div>',b.closeButton({className:"avpw_textwithfont_overlay_close_button",text:AV.getLocalizedString("Remove")}),"</div>"].join("")};b.textEntryOverlayProxy=function(){return'<pre class="avpw_textwithfont_overlay_proxy"><span class="avpw_proxy_get_height"> </span></pre>'};
b.textEntryOutlineStyle=function(c){var a=c.size?c.size/2:1;return["-"+a+"px 0 "+c.color+",","-"+0.924*a+"px -"+0.383*a+"px "+c.color+",","-"+0.707*a+"px -"+0.707*a+"px "+c.color+",","-"+0.383*a+"px -"+0.924*a+"px "+c.color+",","0 -"+a+"px "+c.color+",",0.383*a+"px "+0.924*a+"px "+c.color+",",0.707*a+"px -"+0.707*a+"px "+c.color+",",0.924*a+"px "+0.383*a+"px "+c.color+",",a+"px 0 "+c.color+",",0.924*a+"px "+0.383*a+"px "+c.color+",",0.707*a+"px "+0.707*a+"px "+c.color+",",0.383*a+"px "+0.924*a+"px "+
c.color+",","0 "+a+"px "+c.color+",","-"+0.383*a+"px "+0.924*a+"px "+c.color+",","-"+0.707*a+"px "+0.707*a+"px "+c.color+",","-"+0.924*a+"px "+0.383*a+"px "+c.color].join("")};b.blankPreset=function(){return'<div class="avpw_preset_icon avpw_icon avpw_preset_icon_disabled"></div>'};b.blankCropPreset=function(){return'<div class="avpw_preset_crop_icon avpw_preset_icon avpw_icon avpw_preset_icon_disabled"></div>'};b.stickerThumbnail=function(a){return['<div class="avpw_icon avpw_overlay_icon avpw_isa_control_selector_overlay" thumburl="'+
a.thumburl+'" fullimageurl="'+a.url+'">','<div class="avpw_icon_image avpw_overlay_image avpw_header_inline_center">','<img draggable="false" src="'+a.thumburl+'" fullimageurl="'+a.url+'"></img>','</div><div class="avpw_icon_waiter avpw_center_contents avpw_isa_overlay_waiter"></div></div>'].join("")};b.stickerRollInner=function(a){return['<img draggable="false" height="60" width="60" class="avpw_stickerpack_image" ','src="'+a.thumburl+'"></img>','<span class="avpw_icon_label avpw_label">'+a.label+
"</span>"].join("")};b.stickerRoll=function(a){return['<div class="avpw_icon avpw_pack_icon avpw_pack_icon_selected avpw_stickerpack_icon avpw_isa_control_selector_stickerpack" data-pack="'+a.id+'">',b.stickerRollInner(a),"</div>"].join("")};b.stickerRollDisabled=function(a){return['<div class="avpw_icon avpw_pack_icon avpw_pack_icon_selected avpw_stickerpack_icon avpw_isa_control_selector_stickerinfo" data-pack="'+a.id+'">',b.stickerRollInner(a),'<div class="avpw_icon_waiter avpw_center_contents"></div></div>'].join("")};
b.stickerLeadIn=function(){return'<div class="avpw_overlay_lead"><div class="avpw_overlay_lead_inner"></div></div>'};b.filterThumbnail=function(a){return['<div class="avpw_icon avpw_filter_icon avpw_isa_control_selector_filter" data-frame="'+a.frame+'" data-filtername="'+a.id+'">',b.presetIndicator(),'<img draggable="false" height="55" width="55" class="avpw_filter_icon_image" ','src="'+a.thumburl+'"></img>','<span class="avpw_icon_label avpw_label">'+a.label+"</span>",'<div class="avpw_icon_waiter avpw_center_contents"></div></div>'].join("")};
b.filterCanisterInner=function(a){return['<img draggable="false" height="75" width="54" class="avpw_filterpack_image" ','src="'+a.thumburl+'"></img>','<span class="avpw_icon_label avpw_label">'+a.label+"</span>"].join("")};b.filterCanister=function(a){return['<div class="avpw_icon avpw_pack_icon avpw_pack_icon_selected avpw_filterpack_icon avpw_isa_control_selector_filterpack" data-pack="'+a.id+'">',b.filterCanisterInner(a),"</div>"].join("")};b.filterCanisterDisabled=function(a){return['<div class="avpw_icon avpw_pack_icon avpw_pack_icon_selected avpw_filterpack_icon avpw_isa_control_selector_filterinfo" data-pack="'+
a.id+'">',b.filterCanisterInner(a),'<img draggable="false" height="75" width="54" class="avpw_filterpack_tag_image" src="'+a.tagurl+'"></img>','<div class="avpw_icon_waiter avpw_center_contents"></div></div>'].join("")};b.frameThumbnail=function(a){return['<div class="avpw_filter_icon avpw_icon avpw_isa_control_selector_frame" data-framename="'+(a.id?a.id:"")+'">',b.presetIndicator(),'<canvas height="55" width="55" class="avpw_filter_icon_image" style="background-image: url(\''+a.thumburl+"')\"></canvas>",
'<span class="avpw_icon_label avpw_label">'+a.label+"</span>","</div>"].join("")};b.straightenSlider=function(){return'<div class="avpw_straighten_ui avpw_straighten_ui_animate" id="avpw_straighten_container"><div class="avpw_straighten_ui_grid avpw_straighten_ui_grid_animate" id="avpw_straighten_grid"></div><a id="avpw_straighten_handle"></a></div>'};b.canvasControls=function(){return'<div class="avpw_canvas_controls" id="avpw_canvas_controls_layer"></div>'};b.flashCanvasBox=function(a){return['<table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" height="100%"><tr><td width="100%" height="100%" valign="middle" align="center">',
'<div id="'+a.id+'"></div>',"</td></tr></table>"].join("")};b.advancedToolsSplitter=function(){return'<div class="avpw_advanced_splitter"><div class="avpw_advanced_splitter_inner"><div class="avpw_advanced_splitter_control"><div class="avpw_advanced_splitter_bottom_shadow"></div><div class="avpw_advanced_splitter_bottom"></div><div class="avpw_advanced_splitter_middle"><a class="avpw_advanced_splitter_up_arrow"></a><a class="avpw_advanced_splitter_down_arrow"></a></div></div></div></div>'}})(AV.template=
AV.template||{});"undefined"==typeof AV&&(AV={});
(function(a){a.en={"A filter pack has been updated. Click ok to reload the packs list.":"A filter pack has been updated. Click ok to reload the packs list.","A sticker pack has been updated. Click ok to reload the packs list.":"A sticker pack has been updated. Click ok to reload the packs list.","A sticker pack has been updated. We need to reload the current panel.":"A sticker pack has been updated. We need to reload the current panel.","A sticker pack has been updated. We need to reload the current panel. Do you want to apply the current sticker?":"A sticker pack has been updated. We need to reload the current panel. Do you want to apply the current sticker?",About:"About",
"About this editor":"About this editor",Accounts:"Accounts","Active Tools":"Active Tools","Add a comment":"Add a comment","Add Text":"Add Text","Add the Aviary SDK to your own mobile app.":"Add the Aviary SDK to your own mobile app.","Add your email address to let developers contact you about crashes":"Add your email address to let developers contact you about crashes",Albums:"Albums","Always ask me to share after editing":"Always ask me to share after editing","Always Prompt":"Always Prompt","App Store":"App Store",
Apply:"Apply","Applying action %2$i of %2$i":"Applying action %2$i of %2$i","Applying effects":"Applying effects","Are you sure you want to discard changes from this tool?":"Are you sure you want to discard changes from this tool?","Are you sure you want to remove this sticker?":"Are you sure you want to remove this sticker?","Are you sure?":"Are you sure?","Are you sure? This action cannot be undone.":"Are you sure? This action cannot be undone.","Are you sure? This can distort your image":"Are you sure? This can distort your image",
Artist:"Artist",Attention:"Attention",Auto:"Auto",Aviary:"Aviary","Aviary Editor":"Aviary Editor","Aviary is a free embeddable photo editor that developers can add to their app in just minutes.":"Aviary is a free embeddable photo editor that developers can add to their app in just minutes.",Back:"Back",Backlit:"Backlit",Balance:"Balance","Beginning of the list":"Beginning of the list","Best for everyday use (recommended)":"Best for everyday use (recommended)","Best for printing and maintaining a high level of detail":"Best for printing and maintaining a high level of detail",
"Best for quick saves and basic sharing":"Best for quick saves and basic sharing","Better get snapping!":"Better get snapping!","Biggest size":"Biggest size",Blemish:"Blemish",Blur:"Blur",Borders:"Borders","Bottom line":"Bottom line",Brightness:"Brightness",Brush:"Brush","Brush size":"Brush size","Brush softness":"Brush softness",Camera:"Camera",Cancel:"Cancel","Choose a Picture":"Choose a Picture","Choose Color":"Choose Color","Choose the destination folder":"Choose the destination folder","Choose which albums you'd like to pull photos from for the gallery view.":"Choose which albums you'd like to pull photos from for the gallery view.",
"Click to release":"Click to release",Close:"Close",Cloud:"Cloud",Color:"Color",Colors:"Colors",Configure:"Configure",Confirm:"Confirm","Contact the Aviary team.":"Contact the Aviary team.","Context Menu":"Context Menu",Contrast:"Contrast","Crash report is disabled":"Crash report is disabled","Crash report is enabled":"Crash report is enabled",Crop:"Crop","Crop again":"Crop again",Custom:"Custom",Delete:"Delete","Delete selected":"Delete selected",Demo:"Demo","Destination folder":"Destination folder",
Details:"Details","Developers: Get this editor!":"Developers: Get this editor!","Disabled Tools":"Disabled Tools",Discard:"Discard",Disconnect:"Disconnect","Don't ask me again":"Don't ask me again","Don't Share":"Don't Share",Done:"Done","Drag corners to resize crop area":"Drag corners to resize crop area",Draw:"Draw","e-mail address":"e-mail address",Edit:"Edit","Edit Bottom Text":"Edit Bottom Text","Edit this Photo":"Edit this Photo","Edit Top Text":"Edit Top Text",Editor:"Editor",Effects:"Effects",
Email:"Email","End of the list":"End of the list",Enhance:"Enhance","Enter text here":"Enter text here",Eraser:"Eraser",Error:"Error","Error Reporting":"Error Reporting","EXIF Tags":"EXIF Tags",Exit:"Exit",Facebook:"Facebook","File name format":"File name format","File saved":"File saved",Finish:"Finish",Flickr:"Flickr",Flip:"Flip",Frames:"Frames",Free:"Free",Free:"Free",Gallery:"Gallery",General:"General","Get More":"Get More","Get this editor":"Get this editor","Get this pack!":"Get this pack!",
"Give Aviary a 5-star review!":"Give Aviary a 5-star review!","Give feedback":"Give feedback","Go!":"Go!",Greeneye:"Greeneye","Hard Brushes":"Hard Brushes",Height:"Height","Help / Support":"Help / Support","Image saved in %1$s. Do you want to see the saved image?":"Image saved in %1$s. Do you want to see the saved image?",Install:"Install",Intensity:"Intensity","Interested? We'll send you some info.":"Interested? We'll send you some info.","Keep editing":"Keep editing","Large (up to 5MP)":"Large (up to 5MP)",
"Learn more!":"Learn more!","Leave Aviary?":"Leave Aviary?","Leave editor":"Leave editor",Loading:"Loading","Loading Image...":"Loading Image...","Log out":"Log out","Logged In Social Networks":"Logged In Social Networks","Login Failed":"Login Failed","Love %@":"Love %@","Love %@?":"Love %@?","Maintain proportions":"Maintain proportions",Max:"Max","Max Save Size":"Max Save Size","Maximum (up to 12MP)":"Maximum (up to 12MP)","Medium size":"Medium size",Meme:"Meme",Min:"Min",Mirror:"Mirror",More:"More",
"More great photo apps":"More great photo apps",Networks:"Networks",Night:"Night","No %@ Accounts":"No %@ Accounts","No Albums Found":"No Albums Found","No effects found for this pack.":"No effects found for this pack.","No stickers defined in Feather_Stickers.":"No stickers defined in Feather_Stickers.","No thanks":"No thanks","Normal (up to 3MP)":"Normal (up to 3MP)",OK:"OK","Old Photo":"Old Photo",'One or more installed effect packs need to be updated. Tap "update" to update them all in Google Play. Alternatively, you can click any effect thumbnail marked with an update icon to update the pack it came from in Google Play.':'One or more installed effect packs need to be updated. Tap "update" to update them all in Google Play. Alternatively, you can click any effect thumbnail marked with an update icon to update the pack it came from in Google Play.',
"Oops, there was an error trying to save the image to the Aviary folder. Do you want to try to save it to the default camera folder?":"Oops, there was an error trying to save the image to the Aviary folder. Do you want to try to save it to the default camera folder?","Oops, there was an error while saving the image.":"Oops, there was an error while saving the image.","Oops! I crashed, but a report has been sent to my developer to help him fix the issue!":"Oops! I crashed, but a report has been sent to my developer to help him fix the issue!",
Open:"Open","Open In...":"Open In...",Options:"Options",Orientation:"Orientation",Original:"Original","Original (no limit)":"Original (no limit)","Original file DateTime will be used":"Original file DateTime will be used","Original size":"Original size","Output Folder":"Output Folder","Output Image Size":"Output Image Size","Override date taken":"Override date taken",Password:"Password","Photo Editor":"Photo Editor","Photo Sources":"Photo Sources",Photos:"Photos","Pick a Photo":"Pick a Photo",Pinch:"Pinch",
"Please Connect":"Please Connect","Please install {Adobe Flash Player} (version {min} or higher), or use a supported browser: {Chrome}, {Firefox}, {Safari}, {Opera}, or {Internet Explorer} (version 9 or higher).":"Please install {Adobe Flash Player} (version {min} or higher), or use a supported browser: {Chrome}, {Firefox}, {Safari}, {Opera}, or {Internet Explorer} (version 9 or higher).","Please Select a Folder":"Please Select a Folder",Power:"Power","Powered by":"Powered by","Powered by Aviary.com":"Powered by Aviary.com",
"Preset Sizes":"Preset Sizes",Preview:"Preview","Rate %@":"Rate %@","Rate %@ in the App Store!":"Rate %@ in the App Store!","Rate it!":"Rate it!","Rate us in the App Store!":"Rate us in the App Store!","Rearrange the tools in the Aviary editor.":"Rearrange the tools in the Aviary editor.",Redeye:"Redeye",Redo:"Redo","Remind me later":"Remind me later",Remove:"Remove",Reset:"Reset",Resize:"Resize",Restore:"Restore",Resume:"Resume","Revert to original?":"Revert to original?",Rotate:"Rotate",Saturation:"Saturation",
Save:"Save","Saving...":"Saving...","sdcard not mounted":"sdcard not mounted",Select:"Select","Select Account":"Select Account","Select Albums":"Select Albums","Select All":"Select All","Select None":"Select None",Send:"Send","Send crash reports":"Send crash reports","Set color":"Set color","Set the default Artist (creator) for each image":"Set the default Artist (creator) for each image",Settings:"Settings",Share:"Share","Share cancelled.":"Share cancelled.","Share failed. ":"Share failed. ","Share succeeded.":"Share succeeded.",
"Share this photo":"Share this photo","Share With...":"Share With...",Sharing:"Sharing","Sharing Prompt":"Sharing Prompt","Sharing screen":"Sharing screen","Sharing...":"Sharing...",Sharpen:"Sharpen",Sharpness:"Sharpness",Size:"Size",Skip:"Skip","Small size":"Small size",Smooth:"Smooth","Social Networks":"Social Networks","Soft Brushes":"Soft Brushes","Sorry, there was an error loading some of the effect packs.":"Sorry, there was an error loading some of the effect packs.","Sorry, there was an error loading the plugin.":"Sorry, there was an error loading the plugin.",
"Sorry, there's no application on your device to handle this action. Do you want to download it now from the market?":"Sorry, there's no application on your device to handle this action. Do you want to download it now from the market?","Sorry, there's no application on your phone to handle this action.":"Sorry, there's no application on your phone to handle this action.","Sorry, there's no file manager installed on your phone to handle this action. Do you want to download one now from the market?":"Sorry, there's no file manager installed on your phone to handle this action. Do you want to download one now from the market?",
"Sorry, you must update the Aviary editor to use this plugin.":"Sorry, you must update the Aviary editor to use this plugin.","Sorry, you must update the plugin to continue.":"Sorry, you must update the plugin to continue.",Square:"Square",Stickers:"Stickers",Store:"Store",Text:"Text","The current date/time will be saved to your photos":"The current date/time will be saved to your photos","There is another image editing window open.  Close it without saving and continue?":"There is another image editing window open.  Close it without saving and continue?",
"There was an error downloading the image, please try again later.":"There was an error downloading the image, please try again later.",'This app needs to be updated to work with your installed effect packs. Tap "update" to update it in Google Play.':'This app needs to be updated to work with your installed effect packs. Tap "update" to update it in Google Play.',"This device will not vibrate while using any tools":"This device will not vibrate while using any tools","This device will vibrate gently when you use certain tools":"This device will vibrate gently when you use certain tools",
"Tip: Never want to share? You can disable this sharing screen in the app settings.":"Tip: Never want to share? You can disable this sharing screen in the app settings.","Tip: You can disable this sharing screen in the app settings.":"Tip: You can disable this sharing screen in the app settings.",Tool:"Tool","Tool Order":"Tool Order","Tool Selection":"Tool Selection",Tools:"Tools","Top line":"Top line",Tumblr:"Tumblr",Twitter:"Twitter",Undo:"Undo","Unknown error":"Unknown error","Unknown errors.":"Unknown errors.",
Update:"Update","Use this folder":"Use this folder",Vibration:"Vibration",View:"View","View Image":"View Image","Wait! You didn't save your work. Are you certain that you want to close this editor?":"Wait! You didn't save your work. Are you certain that you want to close this editor?","Waiting to share.":"Waiting to share.",Warmth:"Warmth","We can't find any %@ accounts linked to this device. Please go into the Settings app, find the %@ settings, and add your %@ account.":"We can't find any %@ accounts linked to this device. Please go into the Settings app, find the %@ settings, and add your %@ account.",
Whiten:"Whiten",Width:"Width","Width and height must be greater than zero and less than the maximum({max}px)":"Width and height must be greater than zero and less than the maximum({max}px)","You are not connected to the internet. Please reconnect and try again.":"You are not connected to the internet. Please reconnect and try again.","You can change this property in the Settings panel.":"You can change this property in the Settings panel.","You did not successfully login to %@. Please try again.":"You did not successfully login to %@. Please try again.",
"You don't have any photos yet.":"You don't have any photos yet.",'You need to update this app and some of the installed effect packs. Tap "update" to update them all in Google Play. This app may not not perform correctly unless everything is updated to the latest version':'You need to update this app and some of the installed effect packs. Tap "update" to update them all in Google Play. This app may not not perform correctly unless everything is updated to the latest version',"You will be disconnected from %@.":"You will be disconnected from %@.",
"You will now be taken to Safari. Would you like to continue?":"You will now be taken to Safari. Would you like to continue?","You're about to lose all the changes you've made. Are you sure you want to revert to the original image?":"You're about to lose all the changes you've made. Are you sure you want to revert to the original image?","You're about to lose the changes you've made in this tool. Are you sure you want to leave?":"You're about to lose the changes you've made in this tool. Are you sure you want to leave?",
"Your image was cropped.":"Your image was cropped.","Your image was temporarily shrunk to make it easier to edit it. When you hit Save, you will save the full display size.":"Your image was temporarily shrunk to make it easier to edit it. When you hit Save, you will save the full display size.","Your photo is being saved. Share it with friends!":"Your photo is being saved. Share it with friends!","Your photo will not be shared.":"Your photo will not be shared.","Your work was saved!":"Your work was saved!",
Zoom:"Zoom","Zoom Mode":"Zoom Mode",Classic:"Classic",Grunge:"Grunge",Nostalgia:"Nostalgia",Original:"Original",Tidal:"Tidal",Viewfinder:"Viewfinder","Chill out with this hip pack of 6 washed out effects. Perfect for parties or a day at the beach.":"Chill out with this hip pack of 6 washed out effects. Perfect for parties or a day at the beach.","Enjoy the awesome look and feel of the original Aviary effects with this pack of 12 classics.":"Enjoy the awesome look and feel of the original Aviary effects with this pack of 12 classics.",
"No need to be a real rock star to take photos like one. Add some volume to your life with these 6 gritty effects.":"No need to be a real rock star to take photos like one. Add some volume to your life with these 6 gritty effects.","See your world through the lenses of some super-cool cameras with these 6 high-tech effects.":"See your world through the lenses of some super-cool cameras with these 6 high-tech effects.","Turn your life's moments into classic, vintage memories with these 6 timeless effects.":"Turn your life's moments into classic, vintage memories with these 6 timeless effects.",
Animals:"Animals",Football:"Football",Halloween:"Halloween",Hats:"Hats",Helmets:"Helmets",Holiday:"Holiday",Mustaches:"Mustaches",Thanksgiving:"Thanksgiving","Available for a limited time only, this pack features monster masks, creepy costumes and other scary stickers. It\u2019s perfect for celebrating the most frightening day of the year!":"Available for a limited time only, this pack features monster masks, creepy costumes and other scary stickers. It\u2019s perfect for celebrating the most frightening day of the year!",
"Celebrate the most wonderful time of the year with this holiday-themed pack of 30 Christmas, Hanukkah and Winter stickers.":"Celebrate the most wonderful time of the year with this holiday-themed pack of 30 Christmas, Hanukkah and Winter stickers.","Cover up that dome with this healthy dose of 15 hats! Perfect for your new disguise or simply hiding that bad hair day!":"Cover up that dome with this healthy dose of 15 hats! Perfect for your new disguise or simply hiding that bad hair day!","Decorate all of your photos with this fun and totally free pack of hats, eyewear, neckwear, speech bubbles, shapes and more!":"Decorate all of your photos with this fun and totally free pack of hats, eyewear, neckwear, speech bubbles, shapes and more!",
"Featuring 15 wacky, weird, strong, and sturdy helmets, this pack is perfect for any dangerous situation! ":"Featuring 15 wacky, weird, strong, and sturdy helmets, this pack is perfect for any dangerous situation! ","Just in time for the season, this pack of fun football stickers is perfect for your game day photos! Includes 15 sporty stickers and bonus jersey numbers!":"Just in time for the season, this pack of fun football stickers is perfect for your game day photos! Includes 15 sporty stickers and bonus jersey numbers!",
"Make your Turkey Day extra special with this fun pack of 15 Thanksgiving hats and Autumn-themed goodies!":"Make your Turkey Day extra special with this fun pack of 15 Thanksgiving hats and Autumn-themed goodies!","Spice up your friends' faces with these hip, silly, iconic and ironic mustaches. Includes 15 super-stylish 'staches, PLUS 3 bonus beards!":"Spice up your friends' faces with these hip, silly, iconic and ironic mustaches. Includes 15 super-stylish 'staches, PLUS 3 bonus beards!","Transform your friends into wild animals with this pack of animal snouts, tails, mouths, ears and more! Includes 15 furry stickers.":"Transform your friends into wild animals with this pack of animal snouts, tails, mouths, ears and more! Includes 15 furry stickers."}})(AV.lang=
AV.lang||{});(function(a){a.AV=a.AV||{};var b=a.AV;b.Pager=function(a){var i,d=0,f=0,h=parseInt((a.itemCount-1)/a.itemsPerPage,10)+1,l=0,g=function(){for(var b="",d=0;d<h;d++)b+=a.pipTemplate({i:d});return b},k=function(){i.removeClass("avpw_page_selected");i.filter('[pagenum="'+d+'"]').addClass("avpw_page_selected")},m=function(){0==d?avpw$(a.leftArrow).removeClass("avpw_prev_enabled").addClass("avpw_prev_disabled"):avpw$(a.leftArrow).removeClass("avpw_prev_disabled").addClass("avpw_prev_enabled");d==h-1?avpw$(a.rightArrow).removeClass("avpw_next_enabled").addClass("avpw_next_disabled"):
avpw$(a.rightArrow).removeClass("avpw_next_disabled").addClass("avpw_next_enabled")},n=function(a,c){var b=avpw$(".avpw_arrow"),d=function(){b.addClass("avpw_arrow_visible")};b.removeClass("avpw_arrow_visible");window.setTimeout(function(){a.apply(this,c);window.setTimeout(d,600)},200)},e=function(b){var b=b||0,d=b*a.pageWidth;0!==b&&(d-=l);return d},j=function(g,f){var j=a.pageContainer,p;if(0>d){if(d=0,"mobile"==b.launchData.openType||"aviary"==b.launchData.openType)return}else if(d>h-1&&(d=h-1,
"mobile"==b.launchData.openType||"aviary"==b.launchData.openType))return;p=e(d);if("mobile"==b.launchData.openType){var o=b.support.getVendorProperty("transform");n(function(){j[0].style[o]=0<d?"translateX(-"+p+"px)":"translateX(0)";m()})}else{if("aviary"==b.launchData.openType)(o=b.support.getVendorProperty("transform"))?j[0].style[o]=0<d?"translateX(-"+p+"px)":"translateX(0)":j[0].style.left=0<d?"-"+p+"px":"0";else{var r=avpw$(j).parent();g?r.animate({scrollLeft:p},1,"swing",f):r.animate({scrollLeft:p},
300,"swing",f)}m()}a.onPageChange&&a.onPageChange.apply(this,[d]);i&&k()},q=function(){f=d;d+=-1;j.call(this);return!1},s=function(){f=d;d+=1;j.call(this);return!1},o=function(){var b=a.longPressDuration||200,e=!1,g=null,h=this,p=function(a){g=window.setInterval(function(){e&&a?(f=d,d+=a,j.call(h)):(window.clearInterval(g),g=null)},b)},i=function(){window.clearInterval(g);g=null;q.call(this);e=!0;p.call(this,-1)},k=function(){window.clearInterval(g);g=null;s.call(this);e=!0;p.call(this,1)},o=function(){e=
!1};return{bindEvents:function(){avpw$(a.leftArrow).bind("mousedown",i).bind("mouseup",o);avpw$(a.rightArrow).bind("mousedown",k).bind("mouseup",o)},unbindEvents:function(){avpw$(a.leftArrow).unbind("mousedown",i).unbind("mouseup",o);avpw$(a.rightArrow).unbind("mousedown",k).unbind("mouseup",o)}}}(),r=function(a,c,d){var e,g,f,j;a.length&&(a=a[0]);a.ontouchstart=function(a){if(a=b.util.getTouch(a))e=a.pageX,f=a.pageY};a.ontouchmove=function(a){if(a=b.util.getTouch(a))g=a.pageX,j=a.pageY;return!1};
a.ontouchend=function(){var a=g-e,b=j-f;30<Math.abs(a)&&60>Math.abs(b)&&(30<a?c():d());g=e=void 0}},p=function(b){if(a.itemsPerPage&&!a.pageTemplate){var b=b.currentTarget,g=a.pageContainer.offset().left,b=avpw$(b).offset().left-g;b>=e(d+1)?(d++,j()):b<e(d)&&(d--,j())}};this.shutdown=function(){if(1!==h){a.bindLongPress?o.unbindEvents():(avpw$(a.leftArrow).unbind("click"),avpw$(a.rightArrow).unbind("click"));var b=a.pageContainer;b.length&&(b=b[0]);b.ontouchstart=b.ontouchmove=b.ontouchend=null;i&&
i.unbind("click");a.pageContainer.undelegate(".avpw_icon","click")}a.pageContainer.html("");i&&a.pipContainer.html("")};this.changePage=j;this.pageLeft=q;this.pageRight=s;this.setCurrentPage=function(a){f=d;d=a};this.getCurrentPage=function(){return d};this.getPreviousPage=function(){return f};this.getLastPage=function(){return h-1};this.getPageCount=function(){return h};this.setPageCount=function(a){h=a};a.pageContainer.html(function(){var b,d,e,g="";a.firstPageTemplate&&(g+=a.firstPageTemplate.apply(this,
[a.firstPageContents]));for(d=b=0;d<h;d++){var f="";for(e=0;e<a.itemsPerPage&&b<a.itemCount;e++)f+=a.itemBuilder.apply(this,[b]),b++;g=a.pageTemplate?g+a.pageTemplate({panelHTML:f,panelWidth:a.pageWidth,panelClass:e===a.itemsPerPage?"avpw_scroll_page_complete":"avpw_scroll_page_incomplete"}):g+f}a.lastPageTemplate&&(g+=a.lastPageTemplate.apply(this,[a.lastPageContents]));e=d=b=0;if(a.firstPageTemplate||a.lastPageTemplate)a.firstPageTemplate&&(a.firstPageWidth?b+=a.firstPageWidth*(a.itemsPerPage/a.pageWidth):
h++),a.lastPageTemplate&&(a.lastPageWidth?b+=a.lastPageWidth*(a.itemsPerPage/a.pageWidth):h++),d=a.itemCount%a.itemsPerPage,b&&(l=a.pageWidth/a.itemsPerPage-a.firstPageWidth%(a.pageWidth/a.itemsPerPage)|0,e=l*(a.itemsPerPage/a.pageWidth),0<d?d+b+e>a.itemsPerPage&&h++:h++);if(!a.pageTemplate&&a.fillRemainingSpace&&(b=(a.itemCount+b+e)%a.itemsPerPage)){d=a.itemsPerPage-b;if(1===h&&a.centerContents){d=d/2|0;e="";for(b=0;b<d;b++)e+=a.fillRemainingSpace.apply(this);g=e+g}for(b=0;b<d;b++)g+=a.fillRemainingSpace.apply(this)}return g}());
1===h?(avpw$(a.leftArrow).hide(),avpw$(a.rightArrow).hide(),a.centerContents&&(a.pageContainer.css("width","auto"),a.pageContainer.addClass("avpw_scroll_strip_centered"))):(avpw$(a.leftArrow).show(),avpw$(a.rightArrow).show(),a.pageContainer.removeClass("avpw_scroll_strip_centered"),a.pipContainer&&a.pipTemplate&&(a.pipContainer.html(g()),i=a.pipContainer.find(".avpw_is_navpip"),k()));(function(){if(h!==1){if(a.bindLongPress)o.bindEvents();else{avpw$(a.leftArrow).bind("click",function(){return a.onPageLeft?
a.onPageLeft.call(this):q.call(this)});avpw$(a.rightArrow).bind("click",function(){return a.onPageRight?a.onPageRight.call(this):s.call(this)})}r(a.pageContainer,q,s);i&&i.bind("click",function(a){a=avpw$(a.currentTarget).attr("pagenum");f=d;d=parseInt(a);j();return false});a.pageContainer.delegate(".avpw_icon","click",p)}})();return this};return a})(this);"undefined"==typeof AV&&(AV={});AV.colorChoices="#000000 #ffffff #f6311d #f7663c #f89a3c #f9ce3c #fcff3d #41ff34 #249b33 #2b61cb #3e00cb #380098 #650098 #9700cb #f8639b #f81ecd #f7289b #f62e6a #000000 #444444 #777777 #878787 #aaaaaa #bababa #dddddd #ffffff".split(" ");AV.brushWidths=[5,10,15,20,25,30,35,40,45,50,60,70];AV.buildBlankPreset=function(){return AV.template[AV.launchData.layout].blankPreset()};AV.buildBlankCropPreset=function(){return AV.template[AV.launchData.layout].blankCropPreset()};
AV.toolDefaults={redeye:{presets:AV.brushWidths,files:[AV.build.feather_baseURL+"redeye.swf"]},greeneye:{initialvalue:10,presets:[3,7,12,20],presetsScaled:[2,5,9,15]},whiten:{initialvalue:10,presets:AV.brushWidths,files:[AV.build.feather_baseURL+"redeye.swf"]},blemish:{initialvalue:5,presets:AV.brushWidths,files:[AV.build.feather_baseURL+"blemish.swf"]},bulge:{radius:100,maxradius:200,power:50},pinch:{radius:100,maxradius:200,power:50},drawing:{initialColor:AV.colorChoices[7],presetsWidth:AV.brushWidths,
presetsColor:AV.colorChoices,files:[AV.build.feather_baseURL+"drawing.swf"]},text:{presetsColor:AV.colorChoices,files:[AV.build.feather_baseURL+"text.swf"]},textwithfont:{presetsColor:AV.colorChoices,presetsFont:[{label:"Abril Fatface",value:"Abril Fatface"},{label:"Arial Black",value:"Arial Black",system:!0},{label:"Bangers",value:"Bangers"},{label:"Cardo",value:"Cardo"},{label:"Chelsea Market",value:"Chelsea Market"},{label:"Delius Unicase",value:"Delius Unicase"},{label:"Didact Gothic",value:"Didact Gothic"},
{label:"Doppio One",value:"Doppio One"},{label:"Droid Serif",value:"Droid Serif"},{label:"Francois One",value:"Francois One"},{label:"Fredoka One",value:"Fredoka One"},{label:"Georgia",value:"Georgia",system:!0},{label:"Impact",value:"Impact",system:!0},{label:"Italiana",value:"Italiana"},{label:"La Belle Aurore",value:"La Belle Aurore"},{label:"Ledger",value:"Ledger"},{label:"Lobster Two",value:"Lobster Two"},{label:"Luckiest Guy",value:"Luckiest Guy"},{label:"Mystery Quest",value:"Mystery Quest"},
{label:"Overlock",value:"Overlock"},{label:"Playball",value:"Playball"},{label:"PT Mono",value:"PT Mono"},{label:"Quicksand",value:"Quicksand"},{label:"Rokkitt",value:"Rokkitt"},{label:"Schoolbell",value:"Schoolbell"},{label:"Shadows Into Light Two",value:"Shadows Into Light Two"},{label:"Shojumaru",value:"Shojumaru"},{label:"Special Elite",value:"Special Elite"},{label:"Stint Ultra Expanded",value:"Stint Ultra Expanded"},{label:"Tahoma",value:"Tahoma",system:!0},{label:"Times New Roman",value:"Times New Roman",
system:!0},{label:"Trebuchet MS",value:"Trebuchet MS",system:!0},{label:"Varela Round",value:"Varela Round"},{label:"Verdana",value:"Verdana",system:!0},{label:"Voltaire",value:"Voltaire"}]},sharpness:{presets:[-100,-33,33,100],files:[AV.build.feather_baseURL+"blur.swf",AV.build.feather_baseURL+"sharpen.swf"]},saturation:{presets:[0,0.66,1.33,2],presetsFlash:[{value:0},{value:0.66},{value:1.33},{value:2}],files:[AV.build.feather_baseURL+"saturation.swf"]},warmth:{presets:[-100,-33,33,100]},brightness:{presets:[-100,
-33,33,100],presetsFlash:[{brightnessvalue:0.33,contrastvalue:1},{brightnessvalue:0.77,contrastvalue:1},{brightnessvalue:1.22,contrastvalue:1},{brightnessvalue:1.66,contrastvalue:1}],files:[AV.build.feather_baseURL+"brightness.swf"]},contrast:{presets:[-100,-33,33,100],presetsFlash:[{contrastvalue:0.33,brightnessvalue:1},{contrastvalue:0.77,brightnessvalue:1},{contrastvalue:1.22,brightnessvalue:1},{contrastvalue:1.66,brightnessvalue:1}],files:[AV.build.feather_baseURL+"contrast.swf"]},colors:{min:-133,
max:67,initialValue:-33,files:[AV.build.feather_baseURL+"colors.swf"]},orientation:{presetsFlash:[{vertical:!1,horizontal:!1},{vertical:!1,horizontal:!0},{vertical:!0,horizontal:!1},{vertical:!0,horizontal:!0}],files:[AV.build.feather_baseURL+"flip.swf",AV.build.feather_baseURL+"rotate90.swf"]},crop:{files:[AV.build.feather_baseURL+"crop.swf",AV.build.feather_baseURL+"resize.swf"]},resize:{files:[AV.build.feather_baseURL+"resize.swf"]},overlay:{files:[AV.build.feather_baseURL+"overlay.swf"]},effects:{files:[AV.build.feather_baseURL+
"effects.swf"],optionalFrame:"singe sancarmen purple thresh aqua andy edgewood joecool".split(" ")},enhance:{presets:["autoenhance","nightenhance","backlightenhance","labcorrect"],files:[AV.build.feather_baseURL+"effects.swf"]},frames:{presetsThickness:[1,2,3,4,5,6]}};
AV.buildColorPicker=function(a,b,c,i){var d=avpw$(b).data("color"),f=null,h=null,l=function(a){var b=a,b=parseInt(-1<b.indexOf("#")?b.substring(1):b,16),a=b>>16,c=(b&65280)>>8,b=b&255,d={h:0,s:0,b:0},g=Math.min(a,c,b),f=Math.max(a,c,b),g=f-g;d.b=f;d.s=0!==f?255*g/f:0;d.h=0!==d.s?a===f?(c-b)/g:c===f?2+(b-a)/g:4+(a-c)/g:-1;d.h*=60;0>d.h&&(d.h+=360);d.s*=100/255;d.b*=100/255;0===d.s&&(d.h=360);return d},g=function(a){var a=a||avpw$(b).data("color"),c=avpw$(b).find(".avpw_isa_color_feedback");a?c.css("background-color",
a).addClass("avpw_custom_color_image_with_preview"):c.removeClass("avpw_custom_color_image_with_preview")},k=function(a){a=a||avpw$(b).data("color");h.find(".avpw_isa_color_feedback").css("background-color",a)},m=function(){var a=avpw$(b).offset(),c=avpw$("#avpw_controls").offset();a.left+=avpw$(b).width()/2;a.left-=h.width()/2;a.left-=c.left;a.top-=c.top;h.css({left:a.left+"px",top:a.top+44+"px"})},n=function(){AV.miniColors.unBindSelectorEvents();h.undelegate(".avpw_color_picker_confirm","mousedown");
f.unbind();h.hide().remove();h=f=null;AV.featherUseFlash&&AV.FlashAPI.showCanvas()};AV.miniColors&&(d=d||a||"#ffffff",a=l(d),f=AV.miniColors.buildSelector(a),(h=avpw$(".avpw_color_picker_dropdown_popup"))&&h.length?(h.unbind(),h.detach()):h=avpw$(AV.template[AV.launchData.layout].colorPickerContainer()),AV.miniColors.bindSelectorEvents(f),avpw$("#avpw_controls").append(h.append(f)),h.delegate(".avpw_color_picker_confirm","mousedown",function(a){a.stopPropagation();a.preventDefault();c&&c.apply(this,
[d]);a=d;avpw$(b).data("color",a);g(d);n()}),f.bind("clickOutsideBounds",function(){g("");n();i&&i.call(this)}).bind("setColor",function(a,b){d="#"+b.hex;k(d)}).show(),k(d),m(),AV.featherUseFlash&&AV.FlashAPI.hideCanvas())};
AV.ControlsWidget.prototype.populateCropPresets=function(a){var b,c,i,d,f,h,l=AV.launchData.cropPresetsStrict;f=this.imageSizeTracker.isUsingHiResDimensions(AV.launchData);AV.featherUseFlash||f?(b=this.paintWidget.getScaledSize(),f=b.width,h=b.height):(f=this.paintWidget.width,h=this.paintWidget.height);b=1<f/h;for(var g=[],k=0;k<a.length;k++){var m,n=a[k]instanceof Array;d=n?a[k][1]:a[k];m=n?a[k][0]:a[k];c=d.indexOf("x");if("custom"===m.toLowerCase())n=!0,m={label:m,width:0.85*f,height:0.75*h,constrain:!1,
resize:!1};else if("original"===m.toLowerCase())n=!0,m={label:m,width:f,height:h,constrain:!0,resize:!1};else if(-1!=c){i=d.substr(0,c);c=d.substr(c+1);i=parseInt(i,10);c=parseInt(c,10);if(i>=f||c>=h)continue;if(!l&&(c>=f||i>=h))continue;if(!n&&!l&&(b&&1>i/c||!b&&1<i/c))m=c+"x"+i,d=i,i=c,c=d;m={label:m,width:i,height:c,constrain:!0,resize:!0}}else if(c=d.indexOf(":"),-1==c&&""!==avpw$.trim(d))continue;else{i=d.substr(0,c);c=d.substr(c+1);i=parseInt(i,10);c=parseInt(c,10);if(!n&&!l&&(b&&1>i/c||!b&&
1<i/c))m=c+":"+i,d=i,i=c,c=d;m={label:m,width:i,height:c,constrain:!0,resize:!1}}m&&(m.strict=l,m.labeled=n,g.push(m))}return g};
AV.Dropdown=function(a){var b=a.updateElement,c=a.popupElement,i=a.defaultValue,d,f,h=function(a,b){a=a||i;f&&f.length&&f.html(a);c&&c.length&&(c.find(".avpw_isa_dropdown_item").removeClass("avpw_dropdown_popup_list_item_selected"),(b=b||c.find('[data-value="'+a+'"]'))&&b.length&&b.addClass("avpw_dropdown_popup_list_item_selected"))},l=function(b){b=b.currentTarget;value=avpw$(b).data("value");h(value,b);a.onItemClicked&&a.onItemClicked.apply(this,[value])},g=function(a,b){if(c){var e,g,f=document.createDocumentFragment();
for(e=0;e<a.length;e++)g=avpw$(b(a[e])),f.appendChild(g[0]);d&&d.length?d.html(f):c.html(f)}},k=function(){c&&c.length&&(c&&c.delegate(".avpw_isa_dropdown_item","click",l),avpw$(window).bind("click",m),c.slideDown(50),b.addClass("avpw_dropdown_open"))},m=function(){c&&c.length&&(b.removeClass("avpw_dropdown_open"),c.slideUp(50),e())},n=function(a){a.preventDefault();a.stopPropagation();c&&c.is(":visible")?m():k()},e=function(){c&&c.undelegate(".avpw_isa_dropdown_item","click");avpw$(window).unbind("click",
m)};this.position=function(){var a=b.offset(),d=avpw$("#avpw_controls").offset();a.left+=b.width()/2;a.left-=c.width()/2;a.left-=d.left;a.top-=d.top;c.css({left:a.left+"px",top:a.top+44+"px"})};this.getPopupElement=function(){return c};this.show=k;this.hide=m;this.update=h;this.shutdown=function(){e();b.unbind("click",n);c&&c.length&&c.remove();c=b=i=f=d=void 0};d=c.find(".avpw_dropdown_popup_list");f=b.find(".avpw_isa_dropdown_display");a.popupParent&&a.popupParent.length&&a.popupParent.append(c);
b.bind("click",n);a.items&&a.itemTemplate&&g(a.items,a.itemTemplate);h();return this};
AV.PacksAndItems=function(a){var b=a.browser,c=a.packBrowser,i=a.pager,d=a.packPager,f=a.buildPacksHTML,h=a.buildPackItemsHTML,l=a.currentPack,g=AV.support.getVendorProperty("transition"),k=this,m=function(a,b){var c=avpw$("#avpw_all_effects"),d=avpw$("#avpw_up_one_level"),e=function(e){a?(d.text(a),b&&d.bind("click",b),c.hide(),e?d.show():(d.addClass("avpw_back_button_hidden"),d.show(),window.setTimeout(function(){d.removeClass("avpw_back_button_hidden")},100))):(d.unbind("click"),d.hide(),e?c.show():
(c.addClass("avpw_back_button_hidden"),c.show(),window.setTimeout(function(){c.removeClass("avpw_back_button_hidden")},100)))};c.is(":visible")?(c.addClass("avpw_back_button_hidden"),window.setTimeout(function(){e();c.removeClass("hidden")},100)):d.is(":visible")?(d.addClass("avpw_back_button_hidden"),window.setTimeout(function(){e();d.removeClass("avpw_back_button_hidden")},100)):e(!0)},n=function(a){c.find(".avpw_pack_icon_selected").removeClass("avpw_pack_icon_selected");avpw$(a).addClass("avpw_pack_icon_selected");
if(g){var e=AV.support.getVendorProperty("transform"),f=AV.controlsWidgetInstance.layoutNotify(AV.launchData.openType,"getDims").INNER_BROWSER_WIDTH+"px";b[0].style[e]="translateX("+f+")";b.addClass("avpw_transition_to_pack_contents");b.show();window.setTimeout(function(){var e=AV.support.getVendorProperty("transform");a.style[e]="translateX("+f+")";avpw$(a).removeClass("avpw_pack_icon_selected");window.setTimeout(function(){c.hide();d&&(d.shutdown(),d=null);h&&h();window.setTimeout(function(){b.removeClass("avpw_transition_to_pack_contents")},
200)},600)},100)}else c.hide(),d&&(d.shutdown(),d=null),h&&h(),b.show()},e=function(){if(g){var a=AV.support.getVendorProperty("transform"),d=AV.controlsWidgetInstance.layoutNotify(AV.launchData.openType,"getDims").INNER_BROWSER_WIDTH+"px";b[0].style[a]="translateX("+d+")";window.setTimeout(function(){i&&(i.shutdown(),i=null);m();f&&f();c.show()},400)}else i&&(i.shutdown(),i=null),m(),f&&f(),c.show()},j=function(){k.onBackButtonClicked();e();return!1};k.onPackClicked=function(a){var a=a.currentTarget,
b=avpw$(a).data("pack");l!==b&&(l=b||l);m(AV.getLocalizedString("Back"),j);n(a);return!1};k.onPackInfoClicked=function(a){_packOfInterest=a=a.currentTarget;a=avpw$(a).data("pack");AV.controlsWidgetInstance.purchaseManager.showAssetPurchaseView(a,k.onPurchaseButtonClicked);return!1};k.onBackButtonClicked=function(){};k.onPurchaseButtonClicked=function(){};k.getCurrentPack=function(){return l};k.setCurrentPack=function(a){l!==a&&(l=a||l)};k.getPackOfInterest=function(){return _packOfInterest};k.updateCancelButton=
m;return k};
(function(a){a.fn.slider=function(b){var b=AV.util.extend({max:100,min:0,value:50},b),c=0,i=c,d=0,f=null,h=null,l=!1,g=null,k=this,m,n=null,e=0,j=null,q=function(a){a?(m=m||k.outerWidth()||1,a-=k.offset().left,a/=m,a=1<a?1:a,a=0>a?0:a,i=parseFloat((c+a*(d-c)).toFixed(5))):a=d!==c?(i-c)/(d-c):0;h.length&&(l?0.5<a?h.css({left:"50%",width:100*(a-0.5)+"%"}):h.css({left:100*a+"%",width:100*(0.5-a)+"%"}):h.css({left:"0",width:100*a+"%"}));f.css("left",100*a+"%")},s=function(a){k.trigger("slidestart",[a]);
e&&(j=null,n=window.setInterval(function(){j&&(k.trigger("slide",[j]),j=null)},e))},o=function(a){k.trigger("slidechange",[a]);e&&window.clearInterval(n)},r=function(){a(document).bind("mousemove",p).bind("mouseup blur",u);s({value:i});return!1},p=function(a){var b=AV.util.getTouch(a);q(b?b.pageX:a.pageX);a={value:i};e?j=a:k.trigger("slide",[a])},u=function(){a(document).unbind("mousemove",p).unbind("mouseup blur",u);o({value:i});return!1},v=function(){f.parent().bind("touchmove",p).bind("touchend",
A);s({value:i});return!1},A=function(){f.parent().unbind("touchmove",p).unbind("touchend",A);o({value:i});return!1},t=function(a){var b=AV.util.getTouch(a);q(b?b.pageX:a.pageX);k.trigger("slidechange",[{value:i}])},i=b.value,c=b.min,d=b.max,h=k.find(".avpw_slider_goo").eq(0),l=!!k.find(".avpw_slider_divider").length,f=k.find("a").eq(0),g=k.parents(".avpw_isa_slider_container");b.delay&&(e=b.delay);g.length&&(g.bind("mousedown",r),e?g.bind("mousedown",t):g.bind("click",t),a.support.touch&&(g.bind("touchstart",
v),e&&g.bind("touchstart",t)));a.support.touch&&f.bind("touchstart",v);f.bind("mousedown",r);k.slider=function(a,b){switch(a){case "value":if(arguments.length<1)return i;i=b;q();break;case "destroy":f.unbind("mousedown mouseup blur touchstart");if(g.length){g.unbind("mousedown",t).unbind("mousedown",r).unbind("touchstart",t).unbind("touchstart",v).unbind("click",t);g=null}f=h=null;window.clearInterval(n);n=null;e=0;j=null}};return k}})(avpw_jQuery);
(function(a,b){a.fn.pressed=function(c){this.bind("mousedown",function(){var i=a(this);i.addClass(c);b.setTimeout(function(){i.removeClass(c)},100)});return this}})(avpw_jQuery,window);
AV.ControlsWidget.prototype.tool.brightness=function(){var a,b=AV.toolDefaults.brightness.presets,c,i,d,f={},h=function(b,c){d=c.value;var f=d/100;AV.featherUseFlash&&(f=0.6*f/100+1);a.paintWidget.module.brightness.applyPreview(f,0,!0)};f.init=function(d){i=100;var g={element:document.getElementById("avpw_brightness_slider"),min:100*b[0],max:100*b[3],defaultValue:i,onchange:h};AV.featherUseFlash||AV.util.extend(g,{onslide:h,delay:100});a=d;c=new a.Slider(g)};f.cancel=function(){f.resetUI()};f.panelWillOpen=
function(){d=i};f.panelDidOpen=function(){c.addListeners()};f.panelWillClose=function(){c.removeListeners()};f.onUndo=function(a){a||f.resetUI()};f.onRedo=function(a){!a&&c&&c.setValue(d)};f.resetUI=function(){c.reset()};f.shutdown=function(){c&&(c.shutdown(),c=void 0);d=i=void 0;a=null};return f}();
AV.ControlsWidget.prototype.tool.contrast=function(){var a,b=AV.toolDefaults.contrast.presets,c,i,d,f={},h=function(b,c){d=c.value;var f=d/100;AV.featherUseFlash&&(f=0.6*f/100+1);a.paintWidget.module.contrast.applyPreview(0,f,!0)};f.init=function(d){i=100;var g={element:document.getElementById("avpw_contrast_slider"),min:100*b[0],max:100*b[3],defaultValue:i,onchange:h};AV.featherUseFlash||AV.util.extend(g,{onslide:h,delay:100});a=d;c=new a.Slider(g)};f.cancel=function(){f.resetUI()};f.panelWillOpen=
function(){d=i};f.panelDidOpen=function(){c.addListeners()};f.panelWillClose=function(){c.removeListeners()};f.onUndo=function(a){a||f.resetUI()};f.onRedo=function(a){!a&&c&&c.setValue(d)};f.resetUI=function(){c.reset()};f.shutdown=function(){c&&(c.shutdown(),c=void 0);a=null};return f}();
AV.ControlsWidget.prototype.tool.saturation=function(){var a,b=AV.toolDefaults.saturation.presets,c,i,d,f={},h=function(b,c){d=c.value;a.paintWidget.module.saturation.applyPreview(d/100,!0)};f.init=function(d){i=100;var g={element:document.getElementById("avpw_saturation_slider"),min:100*b[0],max:100*b[3],defaultValue:i,onchange:h};AV.featherUseFlash||AV.util.extend(g,{onslide:h,delay:400});a=d;c=new a.Slider(g)};f.cancel=function(){f.resetUI()};f.panelWillOpen=function(){d=i};f.panelDidOpen=function(){c.addListeners()};
f.panelWillClose=function(){c.removeListeners()};f.onUndo=function(a){a||f.resetUI()};f.onRedo=function(a){!a&&c&&c.setValue(d)};f.resetUI=function(){c.reset()};f.shutdown=function(){c&&(c.shutdown(),c=void 0);a=null};return f}();
AV.ControlsWidget.prototype.tool.sharpness=function(){var a,b=AV.toolDefaults.sharpness.presets,c,i,d,f={},h=function(b,c){d=c.value;a.paintWidget.module.blur.reset();a.paintWidget.module.sharpen.reset();if(!AV.featherUseFlash||0<d)a.paintWidget.setMode("sharpen"),a.paintWidget.module.sharpen.applyPreview(d,!0);else if(0>d){var f=d,f=0.15*-f|0;a.paintWidget.setMode("blur");a.paintWidget.module.blur.applyPreview(f,!0)}};f.init=function(d){i=0;a=d;c=new a.Slider({element:document.getElementById("avpw_sharpness_slider"),
min:b[0],max:b[3],defaultValue:i,onchange:h})};f.cancel=function(){f.resetUI()};f.panelWillOpen=function(){d=i};f.panelDidOpen=function(){c.addListeners()};f.panelWillClose=function(){c.removeListeners()};f.onUndo=function(a){a||f.resetUI()};f.onRedo=function(a){!a&&c&&c.setValue(d)};f.resetUI=function(){c.reset()};f.shutdown=function(){c&&(c.shutdown(),c=void 0);d=i=void 0;a=null};return f}();
AV.ControlsWidget.prototype.tool.warmth=function(){var a,b=AV.toolDefaults.warmth.presets,c,i,d,f={},h=function(b,c){d=c.value;a.paintWidget.module.warmth.applyPreview(d,!0)};f.init=function(d){i=0;a=d;c=new a.Slider({element:document.getElementById("avpw_warmth_slider"),min:b[0],max:b[3],defaultValue:0,delay:100,onchange:h,onslide:h})};f.cancel=function(){f.resetUI()};f.panelWillOpen=function(){d=i};f.panelDidOpen=function(){c.addListeners()};f.panelWillClose=function(){c.removeListeners()};f.onUndo=
function(a){a||f.resetUI()};f.onRedo=function(a){!a&&c&&c.setValue(d)};f.resetUI=function(){c.reset()};f.shutdown=function(){c&&(c.shutdown(),c=void 0);a=null};return f}();
AV.ControlsWidget.prototype.tool.orientation=function(){var a,b,c,i=null,d=null,f=null,h=null,l,g=!1,k=!1,m=0,n=!1,e=!1,j=0,q,s,o={},r=function(){var b=c.layoutNotify(AV.launchData.openType,"getMaxDims"),b=b.height<b.width?b.height:b.width,b=b-10,b=b<AV.launchData.maxSize?b:AV.launchData.maxSize;c.canvasUI&&(c.canvasUI.viewport.resize(b,b),a?window.setTimeout(c.canvasUI.resetOffset,200):c.canvasUI.resetOffset())},p=function(){r();if(c.canvasUI&&b){var a=c.canvasUI.viewport.getRatio(),e=c.paintWidget.width/
a,a=c.paintWidget.height/a;if(c.canvasUI.viewport.rotateBoundsBy90(m))var g=e,e=a,a=g;s&&(s.shutdown(),s=void 0);s=new c.Slider({element:q,min:-0.5,max:0.5,defaultValue:0,onstart:v,onchange:A,onslide:t});s.addListeners();avpw$("#avpw_straighten_handle").css({left:"50%"});c.paintWidget.setMode("straighten");c.paintWidget.module.straighten.clearSelection();h=f=null;i=e;d=a;var g=0,p=!1;avpw$("#container");for(var j,k=document.createDocumentFragment(),o=0;8>=o;o++){var n=o*(a-1)/8,n=n+0.5|0;j=avpw$('<div class="avpw_straighten_ui_grid_line"></div>');
j.css({top:n+"px",height:"1px",width:e});4===o&&j.addClass("avpw_straighten_ui_center_grid_line");k.appendChild(j[0]);if(0<o)for(var l=0;8>=l;l++){var u=g+1,z=l*(e-1)/8+0.5|0,w=n-g-1;j=avpw$('<div class="avpw_straighten_ui_grid_line"></div>');j.css({top:u+"px",left:z+"px",height:w+"px",width:"1px"});4===l&&!p&&(j.css({top:0,height:a+"px"}).addClass("avpw_straighten_ui_center_grid_line"),p=!0);k.appendChild(j[0])}g=n}avpw$("#avpw_straighten_grid").html(k);q.addClass("avpw_straighten_ui_ready")}},u=
function(a,b,d){c.canvasUI&&c.canvasUI.viewport.rotate(a,b,d)},v=function(){(m%360||g||k)&&H();c.canvasUI&&c.canvasUI.addCanvasClass("avpw_ready_for_straighten");avpw$("#avpw_straighten_grid").addClass("avpw_straighten_ui_grid_ready");c.paintWidget.setMode("straighten");c.paintWidget.module.straighten.setSelectionByRotation(f)},A=function(){c.canvasUI&&c.canvasUI.removeCanvasClass("avpw_ready_for_straighten");avpw$("#avpw_straighten_grid").removeClass("avpw_straighten_ui_grid_ready");c.layoutNotify(AV.launchData.openType,
"updateUndoRedo",[!0,!1])},t=function(e,p){var j,B;B=p.value;b&&(j=AV.math.sign(B),h=45*(1-Math.cos(B*Math.PI))*j,f=h*Math.PI/180,a?(j=k?180:0,B=g?180:0,u(j,B,h)):u(h),j=c.paintWidget.module.straighten.setSelectionByRotation(f),c.canvasUI&&(i&&d)&&c.canvasUI.viewport.resizeFake(i*j,d*j))},w=function(c,d){a&&!AV.featherUseFlash?(c&&c.call(this),q.removeClass("avpw_straighten_ui_animate"),q.removeClass("avpw_straighten_ui_ready"),window.setTimeout(function(){q.addClass("avpw_straighten_ui_animate");
p()},200),u(k?180:0,g?180:0,m)):b&&!AV.featherUseFlash?(q.removeClass("avpw_straighten_ui_ready"),u(0,0,0),d&&d.call(this),p()):d&&d.call(this)},z=function(){k=g=!1;m=0;h=f=null;e=n=!1;j=0},G=function(){c.canvasUI&&a&&!AV.featherUseFlash?(c.canvasUI.removeCanvasClass("avpw_ready_for_orient"),q.removeClass("avpw_straighten_ui_animate"),q.removeClass("avpw_straighten_ui_ready"),window.setTimeout(function(){c.canvasUI.addCanvasClass("avpw_ready_for_orient");q.addClass("avpw_straighten_ui_animate");p()},
200)):(q.removeClass("avpw_straighten_ui_ready"),p())},H=function(){var b=m%360;0!==b&&a&&(c.paintWidget.setMode("rotate90"),c.paintWidget.module.rotate90.rotate90(b,l));if(g||k)c.paintWidget.setMode("flip"),c.paintWidget.module.flip.flip(g,k,l);e=n=!1;j=0;n=g?!n:n;e=k?!e:e;j+=-(m%360);k=g=!1;m=0;u(0,0,0);r()},F=function(c){var d=0,g=0,f=0;if(a&&!AV.featherUseFlash){if(j||e||n)d=e?180:0,g=n?180:0,f=j;u(d,g,f);window.setTimeout(function(){u(0,0,0);c&&c.call(this)},200)}else b&&!AV.featherUseFlash&&
u(0,0,0),c&&c.call(this)},C=function(a){var b=avpw$(a.currentTarget);a.stopPropagation();a.preventDefault();F(function(){b.unbind("click").trigger("click")})},D=function(){avpw$("#avpw_flip_h").bind("click",function(){AV.featherUseFlash?(c.paintWidget.setMode("flip"),c.paintWidget.module.flip.flashFlip(!0,!1)):w(function(){g=!g},function(){c.paintWidget.setMode("flip");c.paintWidget.module.flip.hflip(!0)});c.layoutNotify(AV.launchData.openType,"updateUndoRedo",[!0,!1])});avpw$("#avpw_flip_v").bind("click",
function(){AV.featherUseFlash?(c.paintWidget.setMode("flip"),c.paintWidget.module.flip.flashFlip(!1,!0)):w(function(){k=!k},function(){c.paintWidget.setMode("flip");c.paintWidget.module.flip.vflip(!0)});c.layoutNotify(AV.launchData.openType,"updateUndoRedo",[!0,!1])});avpw$("#avpw_rotate_left").bind("click",function(){var b=!a||!g&&!k||g&&k?-90:90;w(function(){m+=b},function(){c.paintWidget.setMode("rotate90");c.paintWidget.module.rotate90.rotate90(b,l)});c.layoutNotify(AV.launchData.openType,"updateUndoRedo",
[!0,!1])});avpw$("#avpw_rotate_right").bind("click",function(){var b=!a||!g&&!k||g&&k?90:-90;w(function(){m+=b},function(){c.paintWidget.setMode("rotate90");c.paintWidget.module.rotate90.rotate90(b,l)});c.layoutNotify(AV.launchData.openType,"updateUndoRedo",[!0,!1])});avpw$("#avpw_controlpanel_orientation").find(".avpw_inset_button").pressed("avpw_inset_button_down");avpw$("#avpw_all_effects").bind("click",C)},E=function(){avpw$("#avpw_controlpanel_orientation").find(".avpw_inset_button").unbind();
avpw$("#avpw_all_effects").unbind("click",C)};o.init=function(d){c=d;a=!AV.featherUseFlash&&AV.support.getVendorProperty("transformStyle");b=AV.support.getVendorProperty("transform");q=avpw$(AV.template[AV.launchData.layout].straightenSlider());l=!0};o.panelWillOpen=function(){z();D();c.layoutNotify(AV.launchData.openType,"subscribeToResize",["orientationZoom",p]);c.layoutNotify(AV.launchData.openType,"getCanvasControlsElement").append(q);c.layoutNotify(AV.launchData.openType,"hideZoomButton");c.layoutNotify(AV.launchData.openType,
"showCanvasControlsElement")};o.panelDidOpen=function(){c.canvasUI&&a&&(c.canvasUI.addCanvasClass("avpw_ready_for_orient"),q.addClass("avpw_straighten_ui_animate"));p()};o.panelWillClose=function(){c.canvasUI&&c.canvasUI.unsubscribe(o);E();s&&(s.shutdown(),s=void 0);c.layoutNotify(AV.launchData.openType,"scaleCanvas");c.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["orientationZoom"]);c.canvasUI&&a?(c.canvasUI.removeCanvasClass("avpw_ready_for_orient"),q.removeClass("avpw_straighten_ui_animate"),
q.removeClass("avpw_straighten_ui_ready")):b&&q.removeClass("avpw_straighten_ui_ready");q.detach();c.layoutNotify(AV.launchData.openType,"showZoomButton");c.layoutNotify(AV.launchData.openType,"hideCanvasControlsElement")};o.commit=function(){b&&!AV.featherUseFlash&&(H(),f&&0!==f&&(c.paintWidget.setMode("straighten"),c.paintWidget.module.straighten.straighten(f,h,l)))};o.shutdown=function(){E();c=null;s=void 0;q=null};o.onUndo=function(){if(m%360||g||k||f&&0!==f)o.commit(),z();G()};o.onRedo=function(){G()};
o.onEnableZoomMode=function(){c.canvasUI&&c.canvasUI.unsubscribe(o);return!1};o.onDisableZoomMode=function(){c.canvasUI&&c.canvasUI.subscribe(o)};return o}();
AV.ControlsWidget.prototype.tool.crop=function(){var a,b=null,c,i,d,f=!1,h={},l=function(a){a=c[a];a.label=AV.getLocalizedString(a.label);return AV.template[AV.launchData.layout].cropPreset(a)},g=function(a){a.parent().children().each(function(a,b){var d=c[a];if(d){var g=d.label,f=d.labeled,h=avpw$(b).find(".avpw_label"),p=h.html(),i=d.resize?"x":":";f||(p===g?(f=g.indexOf(i),-1!=i&&(p=g.substr(0,f),g=g.substr(f+1),p=parseInt(p,10),g=parseInt(g,10),p=g+i+p)):p=g,h.html(p),d.flipped=!d.flipped)}})},
k=function(){var d=avpw$(this),e=AV.util.findItemByKeyValueFromArray("label",d.data("crop"),c),f,h;b=null;e&&(!e.labeled&&(!e.strict&&d.hasClass("avpw_preset_icon_active"))&&g(d),e.flipped?(d.addClass("avpw_crop_preset_flipped"),f=e.height,h=e.width):(d.removeClass("avpw_crop_preset_flipped"),f=e.width,h=e.height),e.resize?(b=e,f=a.paintWidget.a2c(f,h,!0),a.paintWidget.module.crop.setInitialSelectionTo(f.width,f.height)):f&&h&&a.paintWidget.module.crop.setInitialSelectionByRatio(f/h),a.paintWidget.module.crop.forceAspect(e.constrain));
d.siblings().removeClass("avpw_preset_icon_active");d.siblings().removeClass("avpw_crop_preset_flipped");d.addClass("avpw_preset_icon_active");return!1},m=function(){d&&d.shutdown();c=a.populateCropPresets(i);var b=a.layoutNotify(AV.launchData.openType,"getDims").PRESET_CROP_ICON_WIDTH,e=a.layoutNotify(AV.launchData.openType,"getCropPresetsPerPage"),g=b*e,f=c.length,h=avpw$("#avpw_crop_presets_scroll_region");h.css({width:(f+e)*b+"px"});d=new AV.Pager({leftArrow:avpw$("#avpw_crop_presets_lftArrow"),
rightArrow:avpw$("#avpw_crop_presets_rghtArrow"),itemCount:f,itemsPerPage:e,pageWidth:g,itemBuilder:l,pageContainer:h,fillRemainingSpace:AV.buildBlankCropPreset,centerContents:!0});d.changePage()};h.resetUI=function(){a.layoutNotify(AV.launchData.openType,"scaleCanvas");AV.util.nextFrame(function(){var a=avpw$("#avpw_crop_presets_scroll_region").find('.avpw_isa_preset_crop[data-crop="Custom"]');a.length?a.trigger("click"):avpw$("#avpw_crop_presets_scroll_region").find(".avpw_isa_preset_crop").eq(0).trigger("click")})};
h.init=function(b){a=b;i=AV.launchData.cropPresets;"string"===typeof presetsFromConfig&&(i=i.split(","));a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildCropPresets",m])};h.shutdown=function(){d&&(d.shutdown(),d=null);a&&(a.paintWidget.module.crop.setMouseDownCallback(null),a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildCropPresets"]));a=b=null};h.onRedoComplete=function(){h.resetUI()};h.onUndoComplete=function(){h.resetUI()};h.panelWillOpen=function(){b=null;
f=!1;a.canvasUI&&a.canvasUI.subscribe(h);avpw$("#avpw_crop_presets_scroll_region").delegate(".avpw_isa_preset_crop","click",k);a.layoutNotify(AV.launchData.openType,"hideZoomButton")};h.panelDidOpen=function(){m();d&&(d.setCurrentPage(0),d.changePage());h.resetUI()};h.panelWillClose=function(){a.canvasUI&&a.canvasUI.unsubscribe(h);avpw$("#avpw_crop_presets_scroll_region").undelegate(".avpw_isa_preset_crop","click");d&&(d.shutdown(),d=null);a.layoutNotify(AV.launchData.openType,"showZoomButton")};
h.mouseDownEvent=function(b){a.paintWidget.module.crop.updateUIDown(b.canvasX,b.canvasY)&&(a.canvasUI.setMouseCursor("move"),f=!0);return!1};h.mouseMoveEvent=function(b){if(f)return a.paintWidget.module.crop.updateUIMove(b.canvasX,b.canvasY),!1};h.mouseUpEvent=function(b){if(f)return a.canvasUI.setMouseCursor(),a.paintWidget.module.crop.apply(b.canvasX,b.canvasY),f=!1};h.commit=function(){a.paintWidget.module.crop.crop();a.paintWidget.module.crop.hideSelection();b&&(a.paintWidget.setMode("resize"),
a.paintWidget.module.resize.resize(b.width,b.height,!0),a.paintWidget.setMode("crop"))};h.onEnableZoomMode=function(){a.canvasUI&&a.canvasUI.unsubscribe(h);return!1};h.onDisableZoomMode=function(){a.canvasUI&&a.canvasUI.subscribe(h)};return h}();
AV.ControlsWidget.prototype.tool.resize=function(){var a,b,c,i,d,f,h,l,g,k=!1,m=!1,n={},e=function(b){if(!0===b||!1===b)f=b;else{if(f&&!m)return a.messager.show("avpw_resize_unlocked",!0),!1;f=!f}f?(i.addClass("avpw_inset_button_active"),q()):i.removeClass("avpw_inset_button_active")},j=function(){var d,e;AV.featherUseFlash||k?(e=a.paintWidget.getScaledSize(),d=e.width,e=e.height):(d=a.paintWidget.width,e=a.paintWidget.height);b.val(d);c.val(e);h=d;l=e},q=function(){var e,i,j;AV.util.nextFrame(function(){if(f)if("width"===
d){i=parseInt(b.val());if(!i||isNaN(i))i=a.paintWidget.width;e=i/a.paintWidget.width;j=a.paintWidget.height*e|0;1>j&&(j=1);c.val(j)}else{j=parseInt(c.val());if(!j||isNaN(j))j=a.paintWidget.height;e=j/a.paintWidget.height;i=a.paintWidget.width*e|0;1>i&&(i=1);b.val(i)}var k=parseInt(b.val()),o=parseInt(c.val());!isNaN(k)&&(0<k&&k<=g)&&(!isNaN(o)&&0<o&&o<=g)&&(h=k,l=o)})},s=function(){avpw$(this).addClass("avpw_text_input_focused").select()},o=function(){avpw$(this).removeClass("avpw_text_input_focused")},
r=function(a){9==a.keyCode||(27==a.keyCode||65==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||35<=a.keyCode&&39>=a.keyCode)||((48>a.keyCode||57<a.keyCode)&&(96>a.keyCode||105<a.keyCode)&&46!==a.keyCode&&8!==a.keyCode?a.preventDefault():(d=a.data.currentProp,q()))};n.init=function(d){a=d;k=a.imageSizeTracker.isUsingHiResDimensions(AV.launchData);g=AV.launchData.hiresMaxSize||AV.launchData.maxSize;b=b||avpw$("#avpw_resize_width");b.bind("keydown",{currentProp:"width"},r).bind("focus",s).bind("blur",
o);c=c||avpw$("#avpw_resize_height");c.bind("keydown",{currentProp:"height"},r).bind("focus",s).bind("blur",o);i=i||avpw$("#avpw_constrain_prop");i.click(e);avpw$("#avpw_constrain_prop_label").click(function(){i.trigger("click")});avpw$("#avpw_resize_invalid_confirm").click(function(){a.messager.hide("avpw_resize_invalid");b.val(h);c.val(l);return!1});avpw$("#avpw_resize_unlocked_confirm").click(function(){m=!0;a.messager.hide("avpw_resize_unlocked");e();return!1});avpw$("#avpw_resize_unlocked_cancel").click(function(){m=
!0;a.messager.hide("avpw_resize_unlocked");return!1});avpw$("#avpw_resize_invalid_max_size").html(g)};n.panelWillOpen=function(){j();e(!0);m=!1;a.layoutNotify(AV.launchData.openType,"hideZoomButton")};n.panelDidOpen=function(){b.trigger("focus");a.layoutNotify(AV.launchData.openType,"scaleCanvas")};n.panelWillClose=function(){a.layoutNotify(AV.launchData.openType,"showZoomButton")};n.onRedoComplete=function(){j()};n.onUndoComplete=function(){j()};n.commit=function(){var d=b.val(),e=c.val(),g=a.paintWidget.height;
if(d!==a.paintWidget.width||e!==g)return d=parseInt(b.val()),e=parseInt(c.val()),d===h&&e===l?(!isNaN(d)&&!isNaN(e)&&a.paintWidget.module.resize.resize(d,e,!0),d=!0):(a.messager.show("avpw_resize_invalid",!0),d=!1),d};n.shutdown=function(){b&&b.unbind();c&&c.unbind();i&&i.unbind();avpw$("avpw_constrain_prop_label").unbind("click");avpw$("#avpw_resize_invalid_confirm").unbind("click");avpw$("#avpw_resize_unlocked_confirm").unbind("click");avpw$("#avpw_resize_unlocked_cancel").unbind("click");a=null};
return n}();
AV.ControlsWidget.prototype.tool.overlay=function(){var a,b,c,i,d,f,h=null,l=null,g,k,m,n=!1,e,j,q={},s=function(a,b,c){AV.util.loadFile(b,"js",function(){m[a]=AV.stickerPacks;AV.stickerPacks=null;c&&"function"===typeof c&&c.call(this)})},o=function(){f.hide();d.show();I();h&&h.changePage(!0)},r=function(b){var c=avpw$(g.getPackOfInterest()).children(".avpw_icon_waiter");a.waitThrobber.spin(c[0]);a.purchaseManager.hideAssetPurchasePopup();s(b.assetId,b.resourceUrl,function(){a.waitThrobber.stop();a.setPanelMode("overlay")})},
p=function(b,c){if(a.paintWidget.overlayRegistry.getElement(b,function(){i=!1;c&&c.call(this)}))return!0;i=!0;return!1},u=function(b,c,d,e){if(AV.featherUseFlash)a.paintWidget.module.overlay.newOverlay(b);else{var g=p(b,function(){a.paintWidget.module.overlay.newOverlay(b,d,e,0.375,0.375);g||a.onEggWaitThrobber.stop()});!g&&c&&(c=avpw$(c).children(".avpw_isa_overlay_waiter"),a.onEggWaitThrobber.spin(c[0]))}},v=function(){_dragOrigin=e=null;i=!1;j&&j.length&&j.detach().remove()},A=function(a){if(j&&
j.length){var b=AV.util.getTouch(a);b?(x=b.pageX,y=b.pageY):(x=a.originalEvent.pageX,y=a.originalEvent.pageY);j.css({left:x+"px",top:y+"px"})}},t=function(a){var b,c,d;v();d=avpw$(a.currentTarget);e=d.attr("fullimageurl");AV.featherUseFlash||((c=AV.util.getTouch(a))?(b=c.pageX,a=c.pageY):(b=a.originalEvent.pageX,a=a.originalEvent.pageY),_dragOrigin={x:b,y:a},avpw$(window).bind("mousemove",w).bind("touchmove",w).bind("mouseup",z).bind("touchend",z),j=d.clone())},w=function(a){var b,c,d=0,g=0;_dragOrigin&&
(d=_dragOrigin.x,g=_dragOrigin.y);(c=AV.util.getTouch(a))?(b=c.pageX,c=c.pageY,avpw$(AV.paintWidgetInstance.canvas).trigger("touchstart")):(b=a.originalEvent.pageX,c=a.originalEvent.pageY);if(5<d-b||5<b-d||5<g-c||5<c-g)avpw$(window).unbind("mousemove",w).unbind("touchmove",w).bind("mousemove",A).bind("touchmove",A),A(a),j.addClass("avpw_overlay_icon_dropped"),avpw$("body").append(j),p(e)},z=function(b){avpw$(window).unbind("mousemove",w).unbind("touchmove",w).unbind("mousemove",A).unbind("touchmove",
A).unbind("mouseup",z).unbind("touchend",z);var c=a.canvasUI.getCoordinatesFromEventWithinCanvasBounds(b);if(c)if(i)var d=window.setInterval(function(){i||(c&&u(e,b.currentTarget,c.canvasX,c.canvasY),window.clearInterval(d),d=null,v())},100);else u(e,b.currentTarget,c.canvasX,c.canvasY),v();else j&&j.length&&(j.addClass("avpw_overlay_icon_return_ready"),AV.util.nextFrame(function(){j.addClass("avpw_overlay_icon_returned");_dragOrigin&&j.css({top:_dragOrigin.y+"px",left:_dragOrigin.x+"px"});window.setTimeout(function(){v()},
400)}))},G=function(b){var c=b.currentTarget,d=avpw$(c).attr("fullimageurl"),g,f;if(d&&d===e){if(a.canvasUI&&(b=a.canvasUI.getViewportCenter()))g=b.canvasX,f=b.canvasY;if(i)var h=window.setInterval(function(){i||(u(d,c,g,f),window.clearInterval(h),h=null)},100);else u(d,c,g,f)}e=_dragOrigin=null;avpw$(window).unbind("mousemove",w).unbind("touchmove",w).unbind("mousemove",A).unbind("touchmove",A)},H=function(c){if(b){var d=b[c][0],e=b[c][1];a.paintWidget.overlayRegistry.add(d,b[c][2]);return AV.template[AV.launchData.layout].stickerThumbnail({url:d,
thumburl:e})}},F=function(a){var a=k[a],b=a.assetId;return(0,AV.template[AV.launchData.layout][a.purchased||!a.needsPurchase?"stickerRoll":"stickerRollDisabled"])({label:AV.getLocalizedString(a.displayName),id:b,thumburl:AV.build.feather_baseURL+"images/stickerpacks/"+b+".png",tagurl:AV.build.feather_baseURL+"images/stickerpacks/purchaseable.png"})},C=function(){if(b){h&&h.shutdown();var c=b.length,d=a.layoutNotify(AV.launchData.openType,"getDims"),e=d.STICKER_ICON_WIDTH,g=a.layoutNotify(AV.launchData.openType,
"getStickersPerPage"),f=e*g;avpw$("#avpw_overlay_images_scroll_region").css({width:c*e+"px",paddingRight:f+"px"});h=new AV.Pager({leftArrow:avpw$("#avpw_overlay_lftArrow"),rightArrow:avpw$("#avpw_overlay_rghtArrow"),itemCount:c,itemsPerPage:g,pageWidth:f,itemBuilder:H,pageContainer:avpw$("#avpw_overlay_images_scroll_region"),firstPageTemplate:AV.template[AV.launchData.layout].stickerLeadIn,firstPageWidth:d.STICKER_LEAD_IN_WIDTH});h.changePage()}},D=function(){h&&(h.shutdown(),h=null);l&&(l.shutdown(),
l=null);g&&g.updateCancelButton();d&&d.length&&d.hide();f&&f.length&&f.show();j=e=null},E=function(){if(!c){c=!0;if(0<k.length){l&&l.shutdown();var b=a.layoutNotify(AV.launchData.openType,"getDims").STICKER_ROLL_WIDTH,d=a.layoutNotify(AV.launchData.openType,"getStickerPacksPerPage"),e=b*d;f.css({width:k.length*b+"px",paddingRight:e+"px"});l=new AV.Pager({leftArrow:avpw$("#avpw_overlay_lftArrow"),rightArrow:avpw$("#avpw_overlay_rghtArrow"),itemCount:k.length,itemsPerPage:d,pageWidth:e,itemBuilder:F,
pageContainer:f});l.changePage()}c=!1}},I=function(){b=m[g.getCurrentPack()];c||(c=!0,0<b.length?C():d.html(AV.getLocalizedString("No stickers defined in Feather_Stickers")),c=!1)};q.init=function(b){a=b;m={};f=avpw$("#avpw_overlay_pack_scroll_region");d=avpw$("#avpw_overlay_images_scroll_region");g=new AV.PacksAndItems({currentPack:"original_stickers",browser:d,packBrowser:f,pager:h,packPager:l,buildPacksHTML:E,buildPackItemsHTML:I});g.onPurchaseButtonClicked=r;f.delegate(".avpw_isa_control_selector_stickerpack",
"click",g.onPackClicked).delegate(".avpw_isa_control_selector_stickerinfo","click",g.onPackInfoClicked);d.delegate(".avpw_isa_control_selector_overlay","mousedown touchstart",t).delegate(".avpw_isa_control_selector_overlay","mouseup",G);a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildStickerPresets",C])};q.panelWillOpen=function(){n=!1;a.canvasUI&&a.canvasUI.subscribe(q);D();g.setCurrentPack();a.purchaseManager.getPurchasedAssets("STICKER",function(a){k=a;var b,c=!1;1===k.length?
m[k[0].assetId]?o():b=function(){c||(o(),c=!0)}:(E(),l&&l.changePage(!0));for(a=0;a<k.length;a++){var d=k[a].assetId,e=k[a].resourceUrl;!m[d]&&e&&s(d,e,b)}})};q.panelWillClose=function(){a.canvasUI&&a.canvasUI.unsubscribe(q);g.updateCancelButton();v()};q.shutdown=function(){D();v();f&&f.length&&f.undelegate();d&&d.length&&d.undelegate();a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildStickerPresets"]);g=m=d=f=a=null};q.mouseDownEvent=function(b){if(!n){var c=a.paintWidget.module.overlay.updateUIDown(b.canvasX,
b.canvasY);!1!==c&&(n=!0,"rotate"===c?a.canvasUI.setMouseCursor("pointer"):"translate"===c&&a.canvasUI.setMouseCursor("move"),q.mouseMoveEvent(b))}};q.mouseMoveEvent=function(b){if(n)return a.paintWidget.module.overlay.updateUIMove(b.canvasX,b.canvasY),!1};q.mouseUpEvent=function(b){n&&(a.canvasUI.setMouseCursor(),a.paintWidget.module.overlay.apply(b.canvasX,b.canvasY),n=!1)};q.onEnableZoomMode=function(){a.canvasUI&&a.canvasUI.unsubscribe(q);return!1};q.onDisableZoomMode=function(){a.canvasUI&&a.canvasUI.subscribe(q)};
return q}();
AV.ControlsWidget.prototype.tool.text=function(){var a,b,c=AV.toolDefaults.text.presetsColor,i,d,f=!1,h,l=!1,g={},k=function(a){return AV.template[AV.launchData.layout].brushColorIcon({color:c[a]})},m=function(a){a.siblings().removeClass("avpw_preset_icon_active");a.addClass("avpw_preset_icon_active")},n=function(a){var c;c=a&&AV.util.color_is_light(a)?"#000":"#fff";AV.util.color_is_light(a);b=a;i=c},e=function(a){a.preventDefault();a=avpw$(this);n(a.data("color"));m(a);f=!1},j=function(c){c.preventDefault();c.stopPropagation();
var d=c.currentTarget;AV.buildColorPicker(b,d,function(b){n(b);a.canvasUI&&a.canvasUI.subscribe(g);m(avpw$(d))},function(){a.canvasUI&&a.canvasUI.subscribe(g)});a.canvasUI&&a.canvasUI.unsubscribe(g)},q=function(){if(!f){var c,d,e,g=avpw$("#avpw_text_font_size").val(),h=b,j=i,k=avpw$("#avpw_text_font").val(),o=avpw$("#avpw_text_area").val();if(a.canvasUI&&(c=a.canvasUI.getViewportCenter()))d=c.canvasX,e=c.canvasY;""==g&&(g=avpw$("#avpw_text_font_size").attr("value"));""==g&&(g="60");""==k&&(k=avpw$("#avpw_text_font").attr("value"));
""==k&&(k="sans-serif");"sans-serif"==k&&(k='"Arial", sans-serif');c=parseFloat(g)/60;a.paintWidget.module.text.newText(o,k,60,h,j,d,e,c,c,0);f=!0;avpw$("#avpw_text_area").trigger("blur")}return!1},s=function(){if(d){var a=avpw$(this);a[0].value="";d=!1;a.addClass("avpw_text_input_focused")}f=!1},o=function(a){if(13==a.which)return avpw$("#avpw_add_text").trigger("click"),!1},r=function(){h&&h.shutdown();var b=a.layoutNotify(AV.launchData.openType,"getDims"),d=b.PRESET_ICON_WIDTH,e=a.layoutNotify(AV.launchData.openType,
"getPresetsPerPage"),g=d*e,f=c.length,i=avpw$("#avpw_text_colors_scroll_region");i.css({width:(f+e+1)*d+"px"});h=new AV.Pager({leftArrow:avpw$("#avpw_text_colors_lftArrow"),rightArrow:avpw$("#avpw_text_colors_rghtArrow"),itemCount:f,itemsPerPage:e,pageWidth:g,itemBuilder:k,pageContainer:i,firstPageTemplate:AV.template[AV.launchData.layout].colorPickerIcon,firstPageWidth:d,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});h.changePage();avpw$("#avpw_text_area").css("width",b.INNER_BROWSER_WIDTH-
b.TEXT_ADD_TEXT_BUTTON_WIDTH+"px")};g.init=function(b){a=b;r();a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildTextPresets",r])};g.panelWillOpen=function(){f=l=!1;var b=avpw$("#avpw_text_area");b[0].value=AV.getLocalizedString("Enter text here");d=!0;b.removeClass("avpw_text_input_focused");h&&(h.setCurrentPage(0),h.changePage());avpw$("#avpw_text_colors_scroll_region").delegate(".avpw_isa_preset_color","click",e).delegate(".avpw_isa_color_picker","click",j);avpw$("#avpw_text_area").bind("focus",
s).bind("keydown",o);avpw$("#avpw_add_text").click(q);a.canvasUI&&a.canvasUI.subscribe(g);avpw$.miniColors&&(AV.miniColors=new avpw$.miniColors)};g.panelDidOpen=function(){_addListeners()};g.panelWillClose=function(){_removeListeners();a.paintWidget.module.effects.deactivate()};g.panelDidOpen=function(){avpw$("#avpw_text_colors_scroll_region").find(".avpw_isa_preset_color").eq(0).trigger("click")};g.panelWillClose=function(){avpw$("#avpw_text_colors_scroll_region").undelegate(".avpw_isa_preset_color",
"click").undelegate(".avpw_isa_color_picker","click");avpw$("#avpw_text_area").unbind();avpw$("#avpw_add_text").unbind("click");a.canvasUI&&a.canvasUI.unsubscribe(g);avpw$("#avpw_text_area").trigger("blur");AV.miniColors=null};g.shutdown=function(){h&&(h.shutdown(),h=null);a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildTextPresets"]);a=null};g.mouseDownEvent=function(b){if(!l)return b=a.paintWidget.module.text.updateUIDown(b.canvasX,b.canvasY),!1!==b&&(l=!0,"rotate"===b?a.canvasUI.setMouseCursor("pointer"):
"translate"===b&&a.canvasUI.setMouseCursor("move")),!1};g.mouseMoveEvent=function(b){if(l)return a.paintWidget.module.text.updateUIMove(b.canvasX,b.canvasY),!1};g.mouseUpEvent=function(b){l&&(f=!1,a.canvasUI.setMouseCursor(),a.paintWidget.module.text.apply(b.canvasX,b.canvasY),l=!1)};g.onEnableZoomMode=function(){a.canvasUI&&a.canvasUI.unsubscribe(g);return!1};g.onDisableZoomMode=function(){a.canvasUI&&a.canvasUI.subscribe(g)};return g}();
AV.ControlsWidget.prototype.tool.textwithfont=function(){var a=AV.getLocalizedString("Enter text here"),b={label:"Arial Black",value:"'Arial Black','Arial-BoldMT','ArialMT','Arial','sans-serif'"},c=1/12,i=AV.support.getVendorProperty("transform"),d,f=AV.toolDefaults.textwithfont.presetsColor,h=AV.toolDefaults.textwithfont.presetsFont,l=null,g,k,m,n,e,j,q=!1,s=!1,o=!1,r,p=b,u=24,v=f[0],A=!0,t={},w=function(a){p=a=a||b;S(a);AV.usageTracker.interact("textwithfont","fontchanged",a.label);e&&e.element&&
(Y(a),P(a),z(),N(e),L(e.element[0]))},z=function(){var a,b,d,g;if(e&&e.element&&(a=e.element.find(".avpw_textwithfont_writer"),d=Z(),g=e.textSize,b=a[0],a.css({"margin-top":"-"+(g/2+0.5|0)+"px"}),b.height=d.height+g,b.width=d.width,b&&e.text)){d=""+e.textSize+"px "+e.textFont.value;a=b.getContext("2d");AV.controlsWidgetInstance.canvasUI&&AV.controlsWidgetInstance.canvasUI.viewport.getRatio();a.font=d;a.textAlign="center";a.textBaseline="bottom";a.fillStyle=e.textColor;a.globalAlpha=1;d=b.width/2+
0.5|0;var f=g,h=e.text.split("\n"),f=f+((b.height-h.length*g)/2+0.5|0);for(b=0;b<h.length;b++)e.textOutline&&(outlineColor=AV.util.color_is_light(e.textColor)?"#000000":"#ffffff",a.strokeStyle=outlineColor,a.lineWidth=g*c,a.strokeText(h[b],d,f)),a.fillText(h[b],d,f),f+=g}},G=function(a){var b=l[a];b&&b.system?w(b):AV.WebFont&&(e&&e.element&&e.element.hide(),avpw$("#avpw_font_browser_preview").hide(),AV.WebFont.load({google:{families:[a]},loading:function(){d.showWaitThrobber(!0)},active:function(){d.showWaitThrobber(!1);
w(b);avpw$("#avpw_font_browser_preview").show();AV.util.nextFrame(D)},inactive:function(){d.showWaitThrobber(!1);AV.errorNotify("UNSUPPORTED_FONT",[a]);w();avpw$("#avpw_font_browser_preview").show();AV.util.nextFrame(D)}}))},H=function(){$();n++;var a,b="text_overlay-"+Math.floor(4294967295*Math.random()).toString(16),c=avpw$(AV.template[AV.launchData.layout].textEntryOverlay({id:b,zIndex:n}));d.layoutNotify(AV.launchData.openType,"getCanvasControlsElement").append(c);a=1;d.canvasUI&&(a=d.canvasUI.viewport.getRatio());
c.css({left:(d.paintWidget.width/a-80)/2+"px",top:"18px",width:"60px"});a={id:b,zIndex:n,helpTextShown:!1,initialCoordsX:0,initialCoordsY:0,element:c};M(a,1);m[b]=a;L(c[0]);e=a;Y(p);P(p);aa(u||24);Q(u||24);T(v||f[0]);e&&e.element&&(e.textOpacity=1);O()},F=function(a){a&&a.element&&(a.element.remove(),delete m[a.id])},C=function(){avpw$.each(m,function(a){F(m[a])})},D=function(){e&&e.element&&e.element.show()},E=function(b){var c,e,g,f,h,i,j,k,o;if(b&&b.element&&(o=b.text)&&o!==a)L(b.element[0]),e=
AV.controlsWidgetInstance.canvasUI?AV.controlsWidgetInstance.canvasUI.viewport.getRatio():1,g=b.textSize*e+0.5|0,f=b.rotation||0,h=b.textColor,b.textOutline&&(i=AV.util.color_is_light(b.textColor)?"#000000":"#ffffff"),j=b.textOpacity,k=b.textFont,c=b.centerX*e+0.5|0,e=b.centerY*e+0.5|0,Q(b.textSize),P(b.textFont),d.paintWidget.module.textwithfont.newText(o,k,g,g,h,i,j,c,e,f)},I=function(){var a,b=n+1,c=Array(b);avpw$.each(m,function(a){c[m[a].zIndex]=m[a]});for(a=0;a<b;a++)c[a]&&E(c[a])},J=function(a){return AV.template[AV.launchData.layout].brushColorIcon({color:f[a]})},
K=function(a){a.siblings().removeClass("avpw_preset_icon_active");a.addClass("avpw_preset_icon_active")},B=function(a){a&&AV.util.color_is_light(a);AV.util.color_is_light(a);v=a;T(a)},ga=function(a){a.preventDefault();var a=avpw$(this),b=a.data("color");B(b);K(a);AV.usageTracker.interact("textwithfont","colorchanged",b)},ha=function(a){a.preventDefault();a.stopPropagation();var b=a.currentTarget;AV.buildColorPicker(v,b,function(a){B(a);d.canvasUI&&d.canvasUI.subscribe(t);K(avpw$(b))},function(){d.canvasUI&&
d.canvasUI.subscribe(t)});d.canvasUI&&d.canvasUI.unsubscribe(t)},V=function(a){var b=avpw$("#avpw_textwithfont_outline_toggle");a?b.addClass("avpw_inset_button_active"):b.removeClass("avpw_inset_button_active");U();A=a},S=function(a){a=a||b;avpw$("#avpw_font_browser_preview").css("font-family",a.value);k&&k.update(a.label)},W=function(a){var b=avpw$("#avpw_textwithfont_colors_scroll_region").find(".avpw_isa_preset_color").filter("[data-color="+a+"]").eq(0);B(a);K(b)},L=function(a){var b,c,d=1,e=m[a.id];
b=a?parseInt(a.style.width,10):0;c=a?avpw$(a).height():0;var g=a?parseInt(a.style.left,10):0,f=a?parseInt(a.style.top,10):0,g=g+10+b/2,f=f+10+c/2;0!==b&&0!==c&&(d=c/b);e&&AV.util.extend(e,{width:b,aspectRatio:d,topLeftX:parseInt(a.style.left||0,10),topLeftY:parseInt(a.style.top||0,10),centerX:g,centerY:f})},M=function(a,b){a.mode=b;a.element.removeClass("avpw_textwithfont_overlay_dragonly");a.element.removeClass("avpw_textwithfont_overlay_editing");e&&e.element&&e.element.find(".avpw_textwithfont_entry").css({color:"transparent",
"text-shadow":""});1===b?(a.element.addClass("avpw_textwithfont_overlay_dragonly"),z()):2===b?(a.element.addClass("avpw_textwithfont_overlay_editing"),a.element.find(".avpw_textwithfont_entry").removeClass("avpw_textwithfont_disable_user_select"),T(v||f[0]),e&&e.element&&(e.textOpacity=1)):e&&e==a&&(e=null)},X=function(a,b){a&&(!a.mode||0===a.mode?b&&M(a,1):1===a.mode?b?M(a,2):M(a,0):2===a.mode&&(b||M(a,1)))},$=function(a){O();if(!a||e!==a)e=null;for(var b in m)m.hasOwnProperty(b)&&m[b]!=a&&M(m[b],
0)},ia=function(a){var b=m[a.currentTarget.id];q=!0;b===e&&(a.stopPropagation(),s=!0,e&&e.element&&(e.element.find(".avpw_textwithfont_entry").removeClass("avpw_textwithfont_disable_user_select"),b=a.currentTarget,a=d.canvasUI?d.canvasUI.getCoordinatesFromEvent(a):{x:0,y:0},e&&e.id===b.id&&(AV.util.extend(e,{initialCoordsX:a.x,initialCoordsY:a.y}),L(b))))},ja=function(a){var b=a.currentTarget;a.stopPropagation();s=!1;L(b);a=b.id;$(m[a]);e=m[a];n++;e&&e.element&&(e.zIndex=n,e.element.css("z-index",
n));W(e.textColor);Q(e.textSize);V(e.textOutline);S(e.textFont);P(e.textFont);e.text?R(e.text):O();q&&(q=!1,e&&e.element&&X(e,!0));e&&2!==e.mode&&e.element.find(".avpw_textwithfont_entry").trigger("blur");e&&e.element&&N(e)},ka=function(a){a.preventDefault();o=!0;e&&(r=e.textSize)},la=function(a){a.preventDefault();o&&(e&&e.textSize)&&AV.usageTracker.interact("textwithfont","sizechanged",e.textSize);o=!1},ma=function(a){a.preventDefault();a=avpw$(a.currentTarget).parents(".avpw_textwithfont_overlay");
if(a.length&&(a=a[0].id,a=m[a]))F(a),AV.usageTracker.interact("textwithfont","textremoved",a.text)},ba=function(a){a.preventDefault();H();AV.usageTracker.interact("textwithfont","textadded")},ca=function(){e&&e.element&&(O(),X(e,!1))},da=function(a){a&&a.element&&a.element.find(".avpw_textwithfont_entry").css({"font-family":a.textFont.value,"font-size":a.textSize+"px"})},Y=function(a){e&&e.element&&(e.textFont=a,z(),da(e))},P=function(a){a=a||b;j&&j.length&&j.css({"font-family":a.value})},aa=function(a){e&&
e.element&&(e.textSize=a,z(),da(e),U())},Q=function(a){j&&j.length&&j.css({"font-size":a,padding:"0 "+(a||0)+"px"})},T=function(a){e&&e.element&&(e.textColor=a,z(),2===e.mode&&(U(a),e.element.find(".avpw_textwithfont_entry").css("color",a)))},U=function(a){if(e&&e.element){var a=a||e.textColor,b="";A?(e.textOutline=!0,b=a&&AV.util.color_is_light(a)?AV.template[AV.launchData.layout].textEntryOutlineStyle({size:c*e.textSize,color:"#000"}):AV.template[AV.launchData.layout].textEntryOutlineStyle({size:c*
e.textSize,color:"#fff"})):e.textOutline=!1;z();2===e.mode&&(e.element.find(".avpw_textwithfont_entry")[0].style.textShadow=b)}},R=function(a){j&&j.length&&j.find(".avpw_proxy_get_height").html(" "+a+" ")},N=function(a){var b,c,d,e;a&&(a.element&&j&&j.length)&&(dims=Z(),d=dims.width||0,e=dims.height||0,b=a.topLeftX,c=a.width,a.element.css({width:d+"px",left:b+((c-d)/2+0.5|0)+"px",height:e+"px"}))},Z=function(){var a={},b,c;j&&j.length&&(b=j.outerWidth(),c=j.find(".avpw_proxy_get_height").height(),
a.height=c,a.width=b);return a},ea=function(){var a;if(e&&e.element&&(a=e.element.find(".avpw_textwithfont_entry"))&&a.length)a.val(""),R(""),N(e),e.helpTextShown=!1,e.element.removeClass("avpw_textwithfont_overlay_helptext")},O=function(){var b;if(e&&e.element&&(b=e.element.find(".avpw_textwithfont_entry"))&&b.length&&!b.val())b.val(a),R(a),N(e),e.text=a,e.helpTextShown=!0,e.element.addClass("avpw_textwithfont_overlay_helptext"),z()},na=function(){e&&e.helpTextShown&&ea()},oa=function(){var a;e&&
e.element&&(e.helpTextShown&&ea(),a=e.element.find(".avpw_textwithfont_entry").eq(0).val(),e.text=a,R(a),!s&&!o&&(N(e),L(e.element[0])))},pa=function(){var a,c,d;l={};if(h){c=h.length;for(a=0;a<c;a++)d=h[a],d.value+=","+b.value,l[h[a].label]=d}},fa=function(){var a,b,c,e,h=avpw$("#avpw_textwithfont_colors_scroll_region");g&&g.shutdown();a=d.layoutNotify(AV.launchData.openType,"getDims").PRESET_ICON_WIDTH;b=d.layoutNotify(AV.launchData.openType,"getPresetsPerPage");c=a*b;e=f.length;h.css({width:(e+
b+1)*a+"px"});g=new AV.Pager({leftArrow:avpw$("#avpw_textwithfont_colors_lftArrow"),rightArrow:avpw$("#avpw_textwithfont_colors_rghtArrow"),itemCount:e,itemsPerPage:b,pageWidth:c,itemBuilder:J,pageContainer:h,firstPageTemplate:AV.template[AV.launchData.layout].colorPickerIcon,firstPageWidth:a,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});g.changePage()};t.init=function(a){d=a;fa();pa();k=new AV.Dropdown({defaultValue:b.label,updateElement:avpw$("#avpw_font_browser"),popupElement:avpw$(AV.template[AV.launchData.layout].fontGroupPopup()),
popupParent:avpw$("#avpw_controls"),items:h,itemTemplate:AV.template[AV.launchData.layout].fontGroupPopupItem,onItemClicked:G});d.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildTextWithFontPresets",function(){fa();k&&k.position()}])};t.panelWillOpen=function(){n=1;O();o=s=!1;p=b;u=24;v=f[0];S(p);V(A);m={};g&&(g.setCurrentPage(0),g.changePage());d.canvasUI&&d.canvasUI.subscribe(t);avpw$("#avpw_textwithfont_colors_scroll_region").delegate(".avpw_isa_preset_color","click",ga).delegate(".avpw_isa_color_picker",
"click",ha);avpw$("#avpw_textwithfont_addtext").bind("click",ba);d.layoutNotify(AV.launchData.openType,"getCanvasControlsElement").delegate(".avpw_textwithfont_overlay","mousedown",ia).delegate(".avpw_textwithfont_overlay","mouseup",ja).delegate(".avpw_textwithfont_overlay","keydown",na).delegate(".avpw_textwithfont_overlay","keyup",oa).delegate(".avpw_textwithfont_overlay_size_handle","mousedown",ka).delegate(".avpw_textwithfont_overlay_size_handle","mouseup",la).delegate(".avpw_textwithfont_overlay_close_button",
"click",ma);AV.controlsWidgetInstance.layoutNotify(AV.launchData.openType,"getEmbedElement").bind("mousedown",ca);avpw$("#avpw_controlpanel_textwithfont").find(".avpw_inset_button").pressed("avpw_inset_button_down");avpw$.miniColors&&(AV.miniColors=new avpw$.miniColors);j=avpw$(AV.template[AV.launchData.layout].textEntryOverlayProxy());d.layoutNotify(AV.launchData.openType,"getCanvasControlsElement").append(j);d.layoutNotify(AV.launchData.openType,"hideZoomButton");d.layoutNotify(AV.launchData.openType,
"showCanvasControlsElement");d.layoutNotify(AV.launchData.openType,"scaleCanvas")};t.panelDidOpen=function(){H();W(v);k&&(k.position(),k.update())};t.panelWillClose=function(){C();m={};e=null;j&&j.length&&j.remove();avpw$("#avpw_textwithfont_colors_scroll_region").undelegate(".avpw_isa_preset_color","click").undelegate(".avpw_isa_color_picker","click");avpw$("#avpw_textwithfont_addtext").unbind("click",ba);d.layoutNotify(AV.launchData.openType,"getCanvasControlsElement").undelegate(".avpw_textwithfont_overlay",
"mousedown").undelegate(".avpw_textwithfont_overlay","mouseup").undelegate(".avpw_textwithfont_overlay","keydown").undelegate(".avpw_textwithfont_overlay","keyup").undelegate(".avpw_textwithfont_overlay_size_handle","mousedown").undelegate(".avpw_textwithfont_overlay_size_handle","mouseup").undelegate(".avpw_textwithfont_overlay_close_button","click");AV.controlsWidgetInstance.layoutNotify(AV.launchData.openType,"getEmbedElement").unbind("mousedown",ca);avpw$("#avpw_controlpanel_textwithfont").find(".avpw_inset_button").unbind();
d.canvasUI&&d.canvasUI.unsubscribe(t);AV.miniColors=null;k&&k.hide();d.layoutNotify(AV.launchData.openType,"showZoomButton");d.layoutNotify(AV.launchData.openType,"hideCanvasControlsElement")};t.shutdown=function(){g&&(g.shutdown(),g=null);d&&d.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildTextWithFontPresets"]);k&&(k.shutdown(),k=void 0);l=d=null};t.mouseMoveEvent=function(a){if(s&&e&&e.element)if(q&&2!==e.mode&&e.element.find(".avpw_textwithfont_entry").addClass("avpw_textwithfont_disable_user_select"),
q=!1,o){var b,c,g,f,h,j,k,l,m,B;g=e.topLeftX;f=e.topLeftY;b=d.layoutNotify(AV.launchData.openType,"getCanvasControlsElement").offset();a.x-=b.left;a.y-=b.top;c=e.aspectRatio;b=e.width;c*=b;k=f+c+20;h=e.centerX;j=e.centerY;l=a.x;m=a.y;a=Math.sqrt(Math.pow(l-h,2)+Math.pow(m-j,2))/Math.sqrt(Math.pow(g-h,2)+Math.pow(k-j,2));B=60/b;a=a>B?a:B;e&&r&&(B=r*a|0,aa(B),Q(B));B=e.rotation||0;k=Math.atan2(k-j,g-h);B&&(k=B-(2*Math.PI-k));h=Math.atan2(m-j,l-h)-k+B;e.rotation=h;h=180*h/Math.PI+0.5|0;e.element.css({left:g-
0.5*b*(a-1)+"px",top:f-0.5*c*(a-1)+"px",width:b*a+"px",height:c*a+"px"});e.element[0].style[i]="rotate("+h+"deg)";z()}else 1===e.mode&&(g=e.topLeftX,f=e.topLeftY,c=e.initialCoordsX,b=e.initialCoordsY,c=a.x-c,b=a.y-b,e.element.css({left:g+c+"px",top:f+b+"px"}));return!1};t.mouseUpEvent=function(){e&&e.element&&(e.element.find(".avpw_textwithfont_entry").trigger("blur"),o&&AV.usageTracker.interact("textwithfont","sizechanged",e.textSize));o=s=!1};t.onEnableZoomMode=function(){d.canvasUI&&d.canvasUI.unsubscribe(t);
return!1};t.onDisableZoomMode=function(){d.canvasUI&&d.canvasUI.subscribe(t)};t.commit=function(){I()};return t}();
AV.ControlsWidget.prototype.tool.effects=function(){var a=AV.toolDefaults.effects.optionalFrame,b,c,i,d,f,h,l,g,k,m,n,e,j=null,q=null,s,o,r,p={},u=function(a){avpw$(".avpw_isa_control_selector_filter").removeClass("avpw_preset_icon_active");a.addClass("avpw_preset_icon_active")},v=function(){var a,b;r&&(a=r.data("filtername"),b=r.children(".avpw_icon_waiter"),l.waitThrobber.spin(b[0]),AV.util.nextFrame(function(){AV.onRunFilter?AV.onRunFilter.apply(this,[a,i,d]):l.paintWidget.module.effects.applyPreview(a,
{seed:h,intensity:i,border:d},!0);l.waitThrobber.stop()}))},A=function(a,b){i=b.value;v()},t=function(a){a.preventDefault();a=avpw$("#avpw_effects_frame_toggle");(d=!d)?a.addClass("avpw_inset_button_active"):a.removeClass("avpw_inset_button_active");v()},w=function(a){a=avpw$(a.currentTarget);id=a.data("filtername");"original"===id?(p.cancel(),K()):(h=Math.floor(4294967295*Math.random()),r=a,v(),f=a.data("frame"),AV.featherUseFlash||avpw$("#avpw_controlpanel_effects").find(".avpw_advanced_splitter_control").fadeIn(100));
u(a);return!1},z=function(a){var b=avpw$(s.getPackOfInterest()).children(".avpw_icon_waiter");l.waitThrobber.spin(b[0]);l.purchaseManager.hideAssetPurchasePopup();l.paintWidget.filterManager.loadPack(a.assetId,a.resourceUrl,function(){l.waitThrobber.stop();l.setPanelMode("effects")})},G=function(b){if(g){for(var c=g[b][0],d=g[b][1],e=a.length,f=!1,b=0;b<e;b++)if(d===a[b]){f=!0;break}return AV.template[AV.launchData.layout].filterThumbnail({label:AV.getLocalizedString(c),id:d,thumburl:AV.build.feather_baseURL+
"images/filters/"+d+".jpg",frame:f})}},H=function(a){var a=o[a],b=a.assetId;return(0,AV.template[AV.launchData.layout][a.purchased||!a.needsPurchase?"filterCanister":"filterCanisterDisabled"])({label:AV.getLocalizedString(a.displayName),id:b,thumburl:AV.build.feather_baseURL+"images/filterpacks/"+b+".png",tagurl:AV.build.feather_baseURL+"images/filterpacks/purchaseable.png"})},F=function(){if(g){j&&j.shutdown();var a=g.length,b=l.layoutNotify(AV.launchData.openType,"getDims").FILTER_IMAGE_WIDTH,c=
l.layoutNotify(AV.launchData.openType,"getFiltersPerPage"),d=b*c;n.css({width:a*b+"px",paddingRight:d+"px"});j=new AV.Pager({leftArrow:avpw$("#avpw_filter_lftArrow"),rightArrow:avpw$("#avpw_filter_rghtArrow"),itemCount:a,itemsPerPage:c,pageWidth:d,itemBuilder:G,pageContainer:n});j.changePage();p.resetUI();avpw$(".avpw_isa_control_selector_filter").eq(0).trigger("click")}},C=function(){j&&(j.shutdown(),j=null);q&&(q.shutdown(),q=null);s&&s.updateCancelButton();n&&n.length&&n.hide();e&&e.length&&e.show()},
D=function(){if(!k){k=!0;if(0<o.length){q&&q.shutdown();var a=l.layoutNotify(AV.launchData.openType,"getDims").FILTER_CANISTER_WIDTH,b=l.layoutNotify(AV.launchData.openType,"getFilterPacksPerPage"),c=a*b;e.css({width:o.length*a+"px",paddingRight:c+"px"});q=new AV.Pager({leftArrow:avpw$("#avpw_filter_lftArrow"),rightArrow:avpw$("#avpw_filter_rghtArrow"),itemCount:o.length,itemsPerPage:b,pageWidth:c,itemBuilder:H,pageContainer:e});q.changePage()}k=!1}},E=function(){var a;a=(a=AV.filtersInOrder?AV.filtersInOrder:
l.paintWidget.filterManager.getClickableFiltersForPack(s.getCurrentPack()))?a.slice(0):[];a.unshift(["Original","original"]);g=a;k||(k=!0,0<g.length?F():n.html(AV.getLocalizedString("No effects found for this pack")),k=!1)},I=function(){m=!1;avpw$("#avpw_controlpanel_effects").removeClass("avpw_advanced_mode")},J=function(){if(m)AV.usageTracker.interact("effects","advancedtools","close"),I();else{AV.usageTracker.interact("effects","advancedtools","open");var a,b=avpw$("#avpw_controlpanel_effects");
f?(b.addClass("avpw_effect_with_frame"),a=avpw$("#avpw_effects_frame_toggle"),d?a.addClass("avpw_inset_button_active"):a.removeClass("avpw_inset_button_active")):b.removeClass("avpw_effect_with_frame");b.addClass("avpw_advanced_mode");m=!0;avpw$("#avpw_controlpanel_effects").addClass("avpw_advanced_mode")}return!1},K=function(){var a=avpw$("#avpw_controlpanel_effects").find(".avpw_advanced_splitter_control");a.is(":visible")?a.fadeOut(100):a.css("display","none")};p.resetUI=function(){avpw$(".avpw_isa_control_selector_filter").removeClass("avpw_preset_icon_active");
avpw$(".avpw_isa_control_selector_filter").eq(0).addClass("avpw_preset_icon_active");b.reset();I();K()};p.init=function(a){l=a;i=1;d=!0;e=avpw$("#avpw_filter_pack_scroll_region");n=avpw$("#avpw_filter_body_scroll_region");s=new AV.PacksAndItems({currentPack:"original_effects",browser:n,packBrowser:e,pager:j,packPager:q,buildPacksHTML:D,buildPackItemsHTML:E});s.onBackButtonClicked=p.cancel;s.onPurchaseButtonClicked=z;e.delegate(".avpw_isa_control_selector_filterpack","click",s.onPackClicked).delegate(".avpw_isa_control_selector_filterinfo",
"click",s.onPackInfoClicked);n.delegate(".avpw_isa_control_selector_filter","click",w);avpw$("#avpw_controlpanel_effects").delegate(".avpw_effects_frame_container","click",t);avpw$("#avpw_controlpanel_effects").delegate(".avpw_advanced_splitter_control","click",J);c=1;b=new l.Slider({element:document.getElementById("avpw_effects_slider"),min:0,max:c,defaultValue:c,delay:400,onchange:A,onslide:A})};p.panelWillOpen=function(){C();s.setCurrentPack();l.purchaseManager.getPurchasedAssets("EFFECT",function(a){o=
a;for(a=0;a<o.length;a++)if("enhance"===o[a].assetId){o.splice(a,1);break}1===o.length?(e.hide(),n.show(),E()):D();q&&q.changePage(!0);j&&j.changePage(!0)});r=null;_lastValue=c;f=void 0;l.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildEffectsPresets",F]);K()};p.panelDidOpen=function(){b.addListeners()};p.panelWillClose=function(){s.updateCancelButton();b.removeListeners();l.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildEffectsPresets"])};p.panelDidClose=function(){I()};
p.cancel=function(){p.resetUI();l.paintWidget.actions.isACheckpoint&&!l.paintWidget.actions.isACheckpoint()&&l.paintWidget.actions.undoToCheckpoint()};p.onUndo=function(a){a||p.resetUI()};p.onRedo=function(a){a||(r&&r.length&&u(r),b&&b.setValue(_lastValue))};p.shutdown=function(){C();b&&(b.shutdown(),b=void 0);e&&e.length&&e.undelegate(".avpw_isa_control_selector_filterpack","click").undelegate(".avpw_isa_control_selector_filterinfo","click");n&&n.length&&n.undelegate(".avpw_isa_control_selector_filter",
"click");avpw$("#avpw_controlpanel_effects").undelegate(".avpw_advanced_checkbox","click");avpw$("#avpw_controlpanel_effects").undelegate(".avpw_advanced_splitter_control","click");l&&l.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildEffectsPresets"]);s=n=e=l=null};return p}();
AV.ControlsWidget.prototype.tool.enhance=function(){var a,b,c=AV.toolDefaults.enhance.presets,i={},d=function(a){a.siblings().removeClass("avpw_inset_button_down");a.addClass("avpw_inset_button_down")},f=function(){var f,l;l=avpw$(this);l.hasClass("avpw_inset_button_down")?(l.removeClass("avpw_inset_button_down"),i.cancel()):(d(l),f=c[l.index()],a.showWaitThrobber(!0,function(){a.paintWidget.module.effects.applyPreview(f,[],true);a.showWaitThrobber(false)}),b=l);return!1};i.resetUI=function(){avpw$("#avpw_controlpanel_enhance").find(".avpw_inset_button").removeClass("avpw_inset_button_down")};
i.init=function(b){a=b};i.panelWillOpen=function(){a.paintWidget.module.effects.activate(a.paintWidget);b=null};i.panelDidOpen=function(){avpw$("#avpw_controlpanel_enhance").find(".avpw_inset_button").bind("click",f)};i.panelWillClose=function(){avpw$("#avpw_controlpanel_enhance").find(".avpw_inset_button").unbind("click").removeClass("avpw_inset_button_down");a.paintWidget.module.effects.deactivate()};i.cancel=function(){i.resetUI();a.paintWidget.actions.isACheckpoint()||a.paintWidget.actions.undoToCheckpoint()};
i.onUndo=function(a){a||i.resetUI()};i.onRedo=function(a){!a&&(b&&b.length)&&d(b)};i.shutdown=function(){a=null};return i}();
AV.ControlsWidget.prototype.tool.drawing=function(){var a,b,c,i=AV.toolDefaults.drawing.presetsWidth,d=AV.toolDefaults.drawing.presetsColor,f,h={},l=function(){var b=1;a.canvasUI&&(b=a.canvasUI.viewport.getRatio());var c=a.paintWidget.module.drawing.erase(),d=a.paintWidget.module.drawing.width();a.brushPreview&&a.brushPreview.show(d/b/2+0.5|0,!c?a.paintWidget.module.drawing.color():null)},g=function(a){a.siblings().removeClass("avpw_preset_icon_active");a.addClass("avpw_preset_icon_active")},k=function(b){b.preventDefault();
var b=avpw$(this),c=1;a.canvasUI&&(c=a.canvasUI.viewport.getRatio());c=b.data("size")*c|0;a.paintWidget.module.drawing.setWidth(c);g(b);l()},m=function(b){a.paintWidget.module.drawing.setErase(!1);a.paintWidget.module.drawing.setColor(b)},n=function(a){a.preventDefault();a=avpw$(this);m(a.data("color"));g(a);l()},e=function(b){b.preventDefault();b.stopPropagation();var c=b.currentTarget;AV.buildColorPicker(a.paintWidget.module.drawing.color(),c,function(b){m(b);l();a.canvasUI&&a.canvasUI.subscribe(h);
g(avpw$(c))},function(){a.canvasUI&&a.canvasUI.subscribe(h)});a.canvasUI&&a.canvasUI.unsubscribe(h)},j=function(b){b.preventDefault();a.paintWidget.module.drawing.setErase(!0);g(avpw$(this));l()},q=function(a){return AV.template[AV.launchData.layout].brushIconSmall({size:i[a]})},s=function(a){return AV.template[AV.launchData.layout].brushColorIcon({color:d[a]})},o=function(){b&&b.shutdown();c&&c.shutdown();var e=a.layoutNotify(AV.launchData.openType,"getDims").PRESET_ICON_WIDTH,g=a.layoutNotify(AV.launchData.openType,
"getPresetsPerPage"),f=e*g,h=i.length,j=avpw$("#avpw_drawing_brushes_scroll_region"),k=d.length,o=avpw$("#avpw_drawing_colors_scroll_region");j.css({width:(h+g)*e+"px"});b=new AV.Pager({leftArrow:avpw$("#avpw_drawing_brushes_lftArrow"),rightArrow:avpw$("#avpw_drawing_brushes_rghtArrow"),itemCount:h,itemsPerPage:g,pageWidth:f,itemBuilder:q,pageContainer:j,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});b.changePage();o.css({width:(k+g+3)*e+"px"});c=new AV.Pager({leftArrow:avpw$("#avpw_drawing_colors_lftArrow"),
rightArrow:avpw$("#avpw_drawing_colors_rghtArrow"),itemCount:k,itemsPerPage:g,pageWidth:f,itemBuilder:s,pageContainer:o,firstPageTemplate:function(a){var b;b=""+AV.template[AV.launchData.layout].eraserIcon(a);return b+=AV.template[AV.launchData.layout].colorPickerIcon(a)},firstPageWidth:2*e,lastPageTemplate:AV.template[AV.launchData.layout].eraserIcon,lastPageWidth:e,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});c.changePage()};h.init=function(b){a=b;o();a.layoutNotify(AV.launchData.openType,
"subscribeToResize",["buildDrawingPresets",o])};h.panelWillOpen=function(){AV.featherUseFlash||(a.paintWidget.setMode("flatten"),a.paintWidget.module.flatten.flatten());f=!1;b&&(b.setCurrentPage(0),b.changePage());c&&(c.setCurrentPage(0),c.changePage());avpw$("#avpw_drawing_brushes_scroll_region").delegate(".avpw_isa_preset_brush","click",k);avpw$("#avpw_drawing_colors_scroll_region").delegate(".avpw_isa_preset_color","click",n).delegate(".avpw_isa_color_picker","click",e).delegate(".avpw_eraser_icon",
"click",j);a.canvasUI&&(a.canvasUI.subscribe(h),a.canvasUI.setMouseCursor("none"));avpw$.miniColors&&(AV.miniColors=new avpw$.miniColors)};h.panelDidOpen=function(){avpw$("#avpw_drawing_brushes_scroll_region").find(".avpw_isa_preset_brush").eq(3).trigger("click");avpw$("#avpw_drawing_colors_scroll_region").find(".avpw_isa_preset_color").eq(0).trigger("click");a.paintWidget.setCurrentLayerByName("drawing")};h.panelWillClose=function(){avpw$("#avpw_drawing_brushes_scroll_region").undelegate(".avpw_isa_preset_brush",
"click");avpw$("#avpw_drawing_colors_scroll_region").undelegate(".avpw_isa_preset_color","click").undelegate(".avpw_isa_color_picker","click").undelegate(".avpw_eraser_icon","click");a.canvasUI&&a.canvasUI.unsubscribe(h);a.paintWidget.uiLayerShow(!1);AV.miniColors=null};h.shutdown=function(){b&&(b.shutdown(),b=null);c&&(c.shutdown(),c=null);a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildDrawingPresets"]);a=null};h.mouseDownEvent=function(b){if(!f)return f=!0,a.paintWidget.module.drawing.updateUIDown(b.canvasX,
b.canvasY),a.layoutNotify(AV.launchData.openType,"hideZoomButton"),!1};h.mouseMoveEvent=function(b){if(f)return a.paintWidget.module.drawing.updateUIDraw(b.canvasX,b.canvasY),!1;a.paintWidget.module.drawing.updateUIMove(b.canvasX,b.canvasY)};h.mouseUpEvent=function(b){f&&(f=!1,a.paintWidget.module.drawing.apply(b.canvasX,b.canvasY),a.layoutNotify(AV.launchData.openType,"showZoomButton"))};h.mouseOutEvent=function(){a.paintWidget.uiLayerShow(!1)};h.onEnableZoomMode=function(){a.canvasUI&&(a.canvasUI.unsubscribe(h),
a.canvasUI.setMouseCursor());a.paintWidget.uiLayerShow(!1);return!1};h.onDisableZoomMode=function(){a.canvasUI&&(a.canvasUI.subscribe(h),a.canvasUI.setMouseCursor("none"))};return h}();
AV.ControlsWidget.prototype.tool.redeye=function(){var a,b,c=AV.toolDefaults.redeye.presets,i,d={},f=function(b){b.preventDefault();var b=avpw$(this),c=1;a.canvasUI&&(c=a.canvasUI.viewport.getRatio());c=b.data("size")*c/2|0;a.paintWidget.module.redeye.setRadius(c);b.siblings().removeClass("avpw_preset_icon_active");b.addClass("avpw_preset_icon_active");b=1;a.canvasUI&&(b=a.canvasUI.viewport.getRatio());c=a.paintWidget.module.redeye.radius();a.brushPreview&&a.brushPreview.show(c/b+0.5|0)},h=function(a){return AV.template[AV.launchData.layout].brushIconLarge({size:c[a]})},
l=function(){b&&b.shutdown();var d=a.layoutNotify(AV.launchData.openType,"getDims").PRESET_ICON_WIDTH,f=a.layoutNotify(AV.launchData.openType,"getPresetsPerPage"),i=d*f,l=c.length,e=avpw$("#avpw_redeye_brushes_scroll_region");e.css({width:(l+f)*d+"px"});b=new AV.Pager({leftArrow:avpw$("#avpw_redeye_brushes_lftArrow"),rightArrow:avpw$("#avpw_redeye_brushes_rghtArrow"),itemCount:l,itemsPerPage:f,pageWidth:i,itemBuilder:h,pageContainer:e,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});b.changePage()};
d.init=function(b){a=b;l();a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildRedeyePresets",l])};d.panelWillOpen=function(){AV.featherUseFlash||(a.paintWidget.setMode("flatten"),a.paintWidget.module.flatten.flatten());b&&(b.setCurrentPage(0),b.changePage());avpw$("#avpw_redeye_brushes_scroll_region").delegate(".avpw_isa_preset_brush","click",f);a.canvasUI&&a.canvasUI.subscribe(d);a.canvasUI&&a.canvasUI.setMouseCursor("none")};d.panelDidOpen=function(){a.paintWidget.module.redeye.setMode("redeye");
avpw$("#avpw_redeye_brushes_scroll_region").find(".avpw_isa_preset_brush").eq(3).trigger("click")};d.panelWillClose=function(){avpw$("#avpw_redeye_brushes_scroll_region").undelegate(".avpw_isa_preset_brush","click");a.canvasUI&&a.canvasUI.unsubscribe(d);a.paintWidget.uiLayerShow(!1)};d.shutdown=function(){a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildRedeyePresets"]);a=null;b&&(b.shutdown(),b=null)};d.mouseDownEvent=function(b){if(!i)return i=!0,a.paintWidget.module.redeye.updateUIDown(b.canvasX,
b.canvasY),!1};d.mouseMoveEvent=function(b){if(i)return a.paintWidget.module.redeye.updateUIDraw(b.canvasX,b.canvasY),!1;a.paintWidget.module.redeye.updateUIMove(b.canvasX,b.canvasY)};d.mouseUpEvent=function(b){i&&(i=!1,a.paintWidget.module.redeye.apply(b.canvasX,b.canvasY))};d.mouseOutEvent=function(){a.paintWidget.uiLayerShow(!1)};d.onEnableZoomMode=function(){a.canvasUI&&(a.canvasUI.unsubscribe(d),a.canvasUI.setMouseCursor());a.paintWidget.uiLayerShow(!1);return!1};d.onDisableZoomMode=function(){a.canvasUI&&
(a.canvasUI.subscribe(d),a.canvasUI.setMouseCursor("none"))};return d}();
AV.ControlsWidget.prototype.tool.whiten=function(){var a,b,c=AV.toolDefaults.whiten.presets,i,d={},f=function(b){b.preventDefault();var b=avpw$(this),c=1;a.canvasUI&&(c=a.canvasUI.viewport.getRatio());c=b.data("size")*c/2|0;a.paintWidget.module.whiten.setRadius(c);b.siblings().removeClass("avpw_preset_icon_active");b.addClass("avpw_preset_icon_active");b=1;a.canvasUI&&(b=a.canvasUI.viewport.getRatio());c=a.paintWidget.module.whiten.radius();a.brushPreview&&a.brushPreview.show(c/b+0.5|0)},h=function(a){return AV.template[AV.launchData.layout].brushIconLarge({size:c[a]})},
l=function(){b&&b.shutdown();var d=a.layoutNotify(AV.launchData.openType,"getDims").PRESET_ICON_WIDTH,f=a.layoutNotify(AV.launchData.openType,"getPresetsPerPage"),i=d*f,l=c.length,e=avpw$("#avpw_whiten_brushes_scroll_region");e.css({width:(l+f)*d+"px"});b=new AV.Pager({leftArrow:avpw$("#avpw_whiten_brushes_lftArrow"),rightArrow:avpw$("#avpw_whiten_brushes_rghtArrow"),itemCount:l,itemsPerPage:f,pageWidth:i,itemBuilder:h,pageContainer:e,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});b.changePage()};
d.init=function(b){a=b;l();a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildWhitenPresets",l])};d.panelWillOpen=function(){AV.featherUseFlash||(a.paintWidget.setMode("flatten"),a.paintWidget.module.flatten.flatten());b&&(b.setCurrentPage(0),b.changePage());avpw$("#avpw_whiten_brushes_scroll_region").delegate(".avpw_isa_preset_brush","click",f);a.canvasUI&&a.canvasUI.subscribe(d);a.canvasUI&&a.canvasUI.setMouseCursor("none")};d.panelDidOpen=function(){avpw$("#avpw_whiten_brushes_scroll_region").find(".avpw_isa_preset_brush").eq(3).trigger("click")};
d.panelWillClose=function(){avpw$("#avpw_whiten_brushes_scroll_region").undelegate(".avpw_isa_preset_brush","click");a.canvasUI&&a.canvasUI.unsubscribe(d);a.paintWidget.uiLayerShow(!1)};d.shutdown=function(){a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildWhitenPresets"]);a=null;b&&(b.shutdown(),b=null)};d.mouseDownEvent=function(b){if(!i)return i=!0,a.paintWidget.module.whiten.updateUIDown(b.canvasX,b.canvasY),!1};d.mouseMoveEvent=function(b){if(i)return a.paintWidget.module.whiten.updateUIDraw(b.canvasX,
b.canvasY),!1;a.paintWidget.module.whiten.updateUIMove(b.canvasX,b.canvasY)};d.mouseUpEvent=function(b){i&&(i=!1,a.paintWidget.module.whiten.apply(b.canvasX,b.canvasY))};d.mouseOutEvent=function(){a.paintWidget.uiLayerShow(!1)};d.onEnableZoomMode=function(){a.canvasUI&&(a.canvasUI.unsubscribe(d),a.canvasUI.setMouseCursor());a.paintWidget.uiLayerShow(!1);return!1};d.onDisableZoomMode=function(){a.canvasUI&&(a.canvasUI.subscribe(d),a.canvasUI.setMouseCursor("none"))};return d}();
AV.ControlsWidget.prototype.tool.blemish=function(){var a,b,c=AV.toolDefaults.blemish.presets,i,d={},f=function(b){b.preventDefault();var b=avpw$(this),c=1;a.canvasUI&&(c=a.canvasUI.viewport.getRatio());c=b.data("size")*c/2|0;a.paintWidget.module.blemish.setRadius(c);b.siblings().removeClass("avpw_preset_icon_active");b.addClass("avpw_preset_icon_active");b=1;a.canvasUI&&(b=a.canvasUI.viewport.getRatio());c=a.paintWidget.module.blemish.radius();a.brushPreview&&a.brushPreview.show(c/b+0.5|0)},h=function(a){return AV.template[AV.launchData.layout].brushIconLarge({size:c[a]})},
l=function(){b&&b.shutdown();var d=a.layoutNotify(AV.launchData.openType,"getDims").PRESET_ICON_WIDTH,f=a.layoutNotify(AV.launchData.openType,"getPresetsPerPage"),i=d*f,l=c.length,e=avpw$("#avpw_blemish_brushes_scroll_region");e.css({width:(l+f)*d+"px"});b=new AV.Pager({leftArrow:avpw$("#avpw_blemish_brushes_lftArrow"),rightArrow:avpw$("#avpw_blemish_brushes_rghtArrow"),itemCount:l,itemsPerPage:f,pageWidth:i,itemBuilder:h,pageContainer:e,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});
b.changePage()};d.init=function(b){a=b;l();a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildBlemishPresets",l])};d.panelWillOpen=function(){AV.featherUseFlash||(a.paintWidget.setMode("flatten"),a.paintWidget.module.flatten.flatten());b&&(b.setCurrentPage(0),b.changePage());avpw$("#avpw_blemish_brushes_scroll_region").delegate(".avpw_isa_preset_brush","click",f);a.canvasUI&&a.canvasUI.subscribe(d);a.canvasUI&&a.canvasUI.setMouseCursor("none")};d.panelDidOpen=function(){avpw$("#avpw_blemish_brushes_scroll_region").find(".avpw_isa_preset_brush").eq(3).trigger("click")};
d.panelWillClose=function(){avpw$("#avpw_blemish_brushes_scroll_region").undelegate(".avpw_isa_preset_brush","click");a.canvasUI&&a.canvasUI.unsubscribe(d);a.paintWidget.uiLayerShow(!1)};d.shutdown=function(){a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildBlemishPresets"]);a=null;b&&(b.shutdown(),b=null)};d.mouseDownEvent=function(b){if(!i)return i=!0,a.paintWidget.module.blemish.updateUIDown(b.canvasX,b.canvasY),!1};d.mouseMoveEvent=function(b){if(i)return a.paintWidget.module.blemish.updateUIDraw(b.canvasX,
b.canvasY),!1;a.paintWidget.module.blemish.updateUIMove(b.canvasX,b.canvasY)};d.mouseUpEvent=function(b){i&&(i=!1,a.paintWidget.module.blemish.apply(b.canvasX,b.canvasY))};d.mouseOutEvent=function(){a.paintWidget.uiLayerShow(!1)};d.onEnableZoomMode=function(){a.canvasUI&&(a.canvasUI.unsubscribe(d),a.canvasUI.setMouseCursor());a.paintWidget.uiLayerShow(!1);return!1};d.onDisableZoomMode=function(){a.canvasUI&&(a.canvasUI.subscribe(d),a.canvasUI.setMouseCursor("none"))};return d}();
AV.ControlsWidget.prototype.tool.frames=function(){var a,b,c,i,d,f,h,l,g,k,m,n,e,j,q,s,o,r={},p=function(a){a.siblings().removeClass("avpw_preset_icon_active");a.addClass("avpw_preset_icon_active")},u=function(){e&&a.paintWidget.module.frames.applyPreview(e,{seed:s,color:q,size:j},!0)},v=function(a){var a=a.currentTarget,b=avpw$(a).data("framename");b?(e=b,s=Math.floor(4294967295*Math.random()),u(),o=b,AV.featherUseFlash||avpw$("#avpw_controlpanel_frames").find(".avpw_advanced_splitter_control").fadeIn(100)):
(r.cancel(),J());p(avpw$(a));return!1},A=function(a){a=a.currentTarget;j=avpw$(a).data("thickness");u();p(avpw$(a))},t=function(a){a=a.currentTarget;q=avpw$(a).data("color");AV.util.nextFrame(G);u();p(avpw$(a))},w=function(a){a.preventDefault();var b=a.currentTarget;AV.buildColorPicker(q,b,function(a){q=a;AV.util.nextFrame(G);u();p(avpw$(b))})},z=function(a){if(k){var b=k[a][1];return AV.template[AV.launchData.layout].frameThumbnail({label:AV.getLocalizedString(k[a][0]),id:b,thumburl:AV.build.feather_baseURL+
"images/filters/original.jpg"})}},G=function(){k&&d.find(".avpw_isa_control_selector_frame canvas").each(function(b,c){var d=k[b][1];d&&a.paintWidget.module.frames.makeThumb(c,d,q)})},H=function(a){return AV.template[AV.launchData.layout].frameThicknessIcon({thickness:l[a]})},F=function(a){var b=g[a],c;n&&a<n&&(c=AV.template[AV.launchData.layout].magicColorIcon());return AV.template[AV.launchData.layout].brushColorIcon({color:b,extra:c})},C=function(){var e=a.layoutNotify(AV.launchData.openType,"getDims"),
j,m,p;k=j=(j=a.paintWidget.filterManager.getClickableFiltersForPack("borders"))?j.slice(0):[];k.unshift(["None"]);var r=k.length;j=e.FILTER_IMAGE_WIDTH;m=a.layoutNotify(AV.launchData.openType,"getFiltersPerPage");p=j*m;d.css({width:r*j+"px",paddingRight:p+"px"});b=new AV.Pager({leftArrow:avpw$("#avpw_frames_lftArrow"),rightArrow:avpw$("#avpw_frames_rghtArrow"),itemCount:r,itemsPerPage:m,pageWidth:p,itemBuilder:z,pageContainer:d});b.changePage();r=l.length;j=e.PRESET_ICON_WIDTH;m=a.layoutNotify(AV.launchData.openType,
"getPresetsPerPage");p=j*m;f.css({width:r*j+"px"});c=new AV.Pager({leftArrow:avpw$("#avpw_frames_thickness_lftArrow"),rightArrow:avpw$("#avpw_frames_thickness_rghtArrow"),itemCount:r,itemsPerPage:m,pageWidth:p,itemBuilder:H,pageContainer:f,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});c.changePage();f.find(".avpw_isa_preset_thickness").eq(3).trigger("click");if((j=a.paintWidget.getImageColors())&&j.length)n=j.length,g=AV.colorChoices.slice(0),g.unshift.apply(g,j);r=g.length;j=e.PRESET_ICON_WIDTH;
m=a.layoutNotify(AV.launchData.openType,"getPresetsPerPage");p=j*m;h.css({width:(r+1)*j+"px"});i=new AV.Pager({leftArrow:avpw$("#avpw_frames_colors_lftArrow"),rightArrow:avpw$("#avpw_frames_colors_rghtArrow"),itemCount:r,itemsPerPage:m,pageWidth:p,itemBuilder:F,firstPageTemplate:AV.template[AV.launchData.layout].colorPickerIcon,firstPageWidth:j,pageContainer:h,fillRemainingSpace:AV.buildBlankPreset,centerContents:!0});i.changePage();h.find("[data-color=#ffffff]").eq(0).trigger("click");o?d.find('[data-framename="'+
o+'"]').trigger("click"):avpw$(".avpw_isa_control_selector_frame").eq(0).trigger("click")},D=function(){b&&(b.shutdown(),b=null);c&&(c.shutdown(),c=null);i&&(i.shutdown(),i=null);e=q=j=null},E=function(){m=!1;avpw$("#avpw_controlpanel_frames").removeClass("avpw_advanced_mode")},I=function(){m?(AV.usageTracker.interact("frames","advancedtools","close"),E()):(AV.usageTracker.interact("frames","advancedtools","open"),m=!0,avpw$("#avpw_controlpanel_frames").addClass("avpw_advanced_mode"));return!1};r.init=
function(b){a=b;l=AV.toolDefaults.frames.presetsThickness;_presetsSize=AV.toolDefaults.frames.presetsSize;g=AV.colorChoices.slice(0);d=avpw$("#avpw_frames_body_scroll_region");f=avpw$("#avpw_frames_thickness_scroll_region");h=avpw$("#avpw_frames_colors_scroll_region");d.delegate(".avpw_isa_control_selector_frame","click",v);f.delegate(".avpw_isa_preset_thickness","click",A);h.delegate(".avpw_isa_preset_color","click",t).delegate(".avpw_isa_color_picker","click",w);avpw$("#avpw_controlpanel_frames").delegate(".avpw_advanced_splitter_control",
"click",I)};var J=function(){var a=avpw$("#avpw_controlpanel_frames").find(".avpw_advanced_splitter_control");a.is(":visible")?a.fadeOut(100):a.css("display","none")};r.resetUI=function(){p(avpw$(".avpw_isa_control_selector_frame").eq(0));J()};r.panelWillOpen=function(){n=o=void 0;D();avpw$.miniColors&&(AV.miniColors=new avpw$.miniColors);J()};r.panelDidOpen=function(){C();a.layoutNotify(AV.launchData.openType,"subscribeToResize",["buildframesPresets",C]);b&&b.changePage(!0)};r.panelWillClose=function(){a&&
a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildframesPresets"]);AV.miniColors=null};r.panelDidClose=function(){E()};r.cancel=function(){r.resetUI();a.paintWidget.actions.isACheckpoint()||a.paintWidget.actions.undoToCheckpoint()};r.onUndo=function(a){a||r.resetUI()};r.onRedo=function(a){!a&&(d&&o)&&p(d.find('[data-framename="'+o+'"]'))};r.shutdown=function(){D();d&&d.length&&d.undelegate(".avpw_isa_control_selector_frame","click");f&&f.length&&f.undelegate(".avpw_isa_preset_thickness",
"click");h&&h.length&&h.undelegate(".avpw_isa_preset_color","click").undelegate(".avpw_isa_color_picker","click");avpw$("#avpw_controlpanel_frames").undelegate(".avpw_advanced_splitter_control","click");a&&a.layoutNotify(AV.launchData.openType,"unsubscribeToResize",["buildframesPresets"]);l=g=_presetsSize=h=f=d=a=null};return r}();
AV.ControlsWidget.prototype.layout.aviary=function(){var a="fullscreen",b={HEADER_HEIGHT:108,FOOTER_HEIGHT:35,MINIMUM_WIDGET_HEIGHT:396,MODE_ACTION_WIDTH:118,BOOKEND_WIDTH:48,INNER_BOOKEND_WIDTH:40,CANVAS_MARGIN:12,CANVAS_PADDING:15,MINIMUM_WIDGET_WIDTH:712,TOOL_ICON_WIDTH:68,PRESET_ICON_WIDTH:54,PRESET_CROP_ICON_WIDTH:82,GENERIC_LEAD_IN_WIDTH:15,STICKER_ICON_WIDTH:80,STICKER_ROLL_WIDTH:80,FILTER_IMAGE_WIDTH:63,FILTER_CANISTER_WIDTH:63,STICKER_LEAD_IN_WIDTH:40,FILTER_LEAD_IN_WIDTH:93,TEXT_ADD_TEXT_BUTTON_WIDTH:121,
CANVAS_HEIGHT:void 0,CANVAS_WIDTH:void 0,TOOLS_BROWSER_WIDTH:void 0,INNER_BROWSER_WIDTH:void 0,TOOL_CONTAINER_WIDTH:void 0},c={},i,d,f,h,l,g,k,m,n,e,j={},q=function(){var a=avpw$("#avpw_controls"),c=a.width(),a=a.height();if(!c||c<b.MINIMUM_WIDGET_WIDTH)c=b.MINIMUM_WIDGET_WIDTH;if(!a||a<b.MINIMUM_WIDGET_HEIGHT)a=b.MINIMUM_WIDGET_HEIGHT;b.CANVAS_HEIGHT=a-(b.HEADER_HEIGHT+b.FOOTER_HEIGHT);b.CANVAS_WIDTH=c-2*b.CANVAS_MARGIN;b.TOOL_CONTAINER_WIDTH=c-2*b.MODE_ACTION_WIDTH;b.TOOLS_BROWSER_WIDTH=c-(2*b.BOOKEND_WIDTH+
b.MODE_ACTION_WIDTH);b.INNER_BROWSER_WIDTH=b.TOOL_CONTAINER_WIDTH-(2*b.INNER_BOOKEND_WIDTH+2+b.GENERIC_LEAD_IN_WIDTH)},s=function(){var a=j.getEmbedElement();AV.support.getVendorProperty("transform")&&(d=avpw$(AV.template[AV.launchData.layout].zoomControls()),a.append(d),d.delegate("#avpw_zoom_button","click",function(){d.hasClass("avpw_zoom_open")?j.disableZoomMode():j.enableZoomMode();return!1}),f=avpw$(AV.template[AV.launchData.layout].zoomModeOverlay()),avpw$("#avpw_tool_content_wrapper").append(f).bind("click",
j.disableZoomMode),f.bind("click",j.disableZoomMode),j.showZoomButton());a.append(AV.template[AV.launchData.layout].canvasControls())};j.getDims=function(){return b};j.onClose=function(b){"fullscreen"===a&&(b?avpw$("#avpw_fullscreen_bg").hide():avpw$("#avpw_fullscreen_bg").fadeOut(300));AV.launchData.noCloseButton||(b?avpw$("#avpw_control_cancel_pane").hide():avpw$("#avpw_control_cancel_pane").fadeOut(300))};j.onShutdown=function(){i&&(i.shutdown(),i=null);d&&(d.undelegate().detach().remove(),d=null);
f&&(f.unbind().detach().remove(),f=null);avpw$("#avpw_tool_content_wrapper").unbind("click",j.disableZoomMode);var a=j.getEmbedElement();avpw$(a).children().remove();avpw$(a).hide();c={};e=m=n=g=k=void 0};j.onCanvasTransform=function(a){a&&j.getCanvasControlsElement().css({top:a.y0+b.CANVAS_PADDING+"px",left:a.x0+b.CANVAS_PADDING+"px",width:a.w+"px",height:a.h+"px"})};j.getToolsPerPage=function(){return b.TOOLS_BROWSER_WIDTH/b.TOOL_ICON_WIDTH|0};j.getPresetsPerPage=function(){return b.INNER_BROWSER_WIDTH/
b.PRESET_ICON_WIDTH|0};j.getCropPresetsPerPage=function(){return b.INNER_BROWSER_WIDTH/b.PRESET_CROP_ICON_WIDTH|0};j.getStickersPerPage=function(){return b.INNER_BROWSER_WIDTH/b.STICKER_ICON_WIDTH|0};j.getStickerPacksPerPage=function(){return b.INNER_BROWSER_WIDTH/b.STICKER_ROLL_WIDTH|0};j.getFiltersPerPage=function(){return b.INNER_BROWSER_WIDTH/b.FILTER_IMAGE_WIDTH|0};j.getFilterPacksPerPage=function(){return b.INNER_BROWSER_WIDTH/b.FILTER_CANISTER_WIDTH|0};j.getEmbedElement=function(){return avpw$("#avpw_canvas_embed")};
j.getCanvasControlsElement=function(){return e=e||avpw$("#avpw_canvas_controls_layer")};j.getMaxDims=function(){return{width:b.CANVAS_WIDTH-2*b.CANVAS_PADDING,height:b.CANVAS_HEIGHT-2*b.CANVAS_PADDING}};j.getScaledImageDims=function(a){var b=j.getMaxDims(),c,d,e;a&&(c=AV.util.getScaledDims(a.width,a.height,b.width,b.height),d=c.width,e=c.height,avpw$(a).css({width:d+"px",height:e+"px",marginLeft:"-"+(d/2|0)+"px",marginTop:"-"+(e/2|0)+"px"}));return c||b};j.getScaledImageDims_Flash=function(a){var c=
b.CANVAS_HEIGHT<b.CANVAS_WIDTH?b.CANVAS_HEIGHT:b.CANVAS_WIDTH,c=c-2*b.CANVAS_PADDING;return AV.util.getScaledDims(a.width,a.height,c)};j.placeControls=function(b){a=b?"embed":"fullscreen";var c=avpw$("#avpw_holder");c.addClass("avpw_is_"+a);"embed"===a?(c.detach(),b=AV.util.getImageElem(b),c.appendTo(b)):avpw$("#avpw_fullscreen_bg").fadeIn(300);q();AV.launchData.noCloseButton||avpw$("#avpw_control_cancel_pane").fadeIn(300);avpw$("#avpw_up_one_level").hide();s()};j.showCanvasControlsElement=function(){j.getCanvasControlsElement().addClass("avpw_canvas_controls_ready")};
j.hideCanvasControlsElement=function(){j.getCanvasControlsElement().removeClass("avpw_canvas_controls_ready")};j.placeControls_Flash=j.placeControls;j.launchStage2_Flash=function(){};j.disableControls=function(){AV.featherUseFlash&&AV.FlashAPI.hideCanvas();var a=avpw$("#avpw_messaging");a.show();AV.util.nextFrame(function(){a.addClass("avpw_messaging_confirmation");avpw$("#avpw_tool_content_wrapper").addClass("avpw_disabled_outer_container")})};j.enableControls=function(){AV.featherUseFlash&&AV.FlashAPI.showCanvas();
var a=avpw$("#avpw_messaging");a.removeClass("avpw_messaging_confirmation");avpw$("#avpw_tool_content_wrapper").removeClass("avpw_disabled_outer_container");window.setTimeout(function(){a.hide()},400)};j.scaleCanvas=function(a,b){var c=j.getMaxDims(),a=a||c.width,b=b||c.height;AV.featherUseFlash||AV.controlsWidgetInstance.canvasUI&&AV.controlsWidgetInstance.canvasUI.viewport.fitLayout(a,b);j.setZoom()};j.updateImageScaledIndicator=function(){var a;AV.paintWidgetInstance?AV.controlsWidgetInstance.imageSizeTracker.isDisplayingImageSize(AV.launchData)&&
(a=AV.paintWidgetInstance.getScaledSize(),avpw$("#avpw_size_indicator").html(a.width+" x "+a.height)):avpw$("#avpw_size_indicator").html("")};j.setZoom=function(){var a;AV.support.getVendorProperty("transform")&&(a=AV.controlsWidgetInstance.canvasUI?1/AV.controlsWidgetInstance.canvasUI.viewport.getRatio():1,i&&(i.shutdown(),i=null),i=new AV.controlsWidgetInstance.Slider({element:document.getElementById("avpw_zoom_slider"),min:a,max:1.5,defaultValue:a,onslide:function(a,b){AV.controlsWidgetInstance.canvasUI.viewport.zoomByRatio(b.value)},
onchange:function(a,b){AV.controlsWidgetInstance.canvasUI.viewport.zoomByRatio(b.value)}}),i.reset(),i.addListeners())};j.enableZoomMode=function(){var a=AV.controlsWidgetInstance;d&&(d.addClass("avpw_zoom_open"),a.canvasUI&&a.canvasUI.viewport.showPanUI(),a.moduleNotify(a.curMode,"onEnableZoomMode")||f.addClass("avpw_zoom_open"))};j.disableZoomMode=function(){var a=AV.controlsWidgetInstance;d&&(d.removeClass("avpw_zoom_open"),a.moduleNotify(a.curMode,"onDisableZoomMode"),f.removeClass("avpw_zoom_open"))};
j.showZoomButton=function(){d&&(l&&(window.clearTimeout(l),l=null),d.show(),h=window.setTimeout(function(){d.addClass("avpw_zoom_visible")},100))};j.hideZoomButton=function(){d&&(h&&(window.clearTimeout(h),h=null),d.removeClass("avpw_zoom_visible"),l=window.setTimeout(function(){d.hide()},200))};j.updateUndoRedo=function(a,b){g=g||avpw$("#avpw_history_undo");k=k||avpw$("#avpw_history_redo");m=m||avpw$("#avpw_history_undo_blocker");n=n||avpw$("#avpw_history_redo_blocker");a?(g.removeClass("avpw_history_disabled"),
m.hide()):(g.addClass("avpw_history_disabled"),m.show());b?(k.removeClass("avpw_history_disabled"),n.hide()):(k.addClass("avpw_history_disabled"),n.show())};j.onResize=function(){q();j.scaleCanvas();for(var a in c){var b=c[a];b&&"function"===typeof b&&b.call(this)}};j.subscribeToResize=function(a,b){c[a]=b};j.unsubscribeToResize=function(a){c[a]=null};return j}();
AV.ControlsWidget.prototype.bindControls=function(){var a=this;avpw$(window).bind("resize",this.windowResized);avpw$("#avpw_controls").bind("mousedown",function(a){var b=a.target.tagName.toLowerCase();"input"!=b&&("textarea"!=b&&"object"!=b)&&a.preventDefault()});AV.launchData.debug&&avpw$("#avpw_logo").click(function(){console.log(this.paintWidget.actions.exportJSON(!0));return!1}.AV_bindInst(this));avpw$(".avpw_button").pressed("avpw_button_down");avpw$(".avpw_tool_icon").pressed("avpw_tool_icon_down");
avpw$(".avpw_checkmark_button .avpw_inset_button").pressed("avpw_inset_button_down");avpw$("#avpw_save_button").click(this.onSaveButtonClicked.AV_bindInst(this));avpw$("#avpw_control_cancel_pane_inner").click(this.cancel.AV_bindInst(this));avpw$("#avpw_control_main_scrolling_region").delegate(".avpw_tool_icon","click",function(){a.setActiveTool(avpw$(this).data("toolname"),this);AV.usageTracker.submit("firstclick");return!1});avpw$("#avpw_resume_editing").click(function(){a.didJumpToLastPage&&(a.didJumpToLastPage=
!1);a.messager.hide("avpw_aviary_quitareyousure");return!1});avpw$("#avpw_resume_aftersave").click(function(){a.messager.hide("avpw_aviary_beensaved");return!1});avpw$("#avpw_close_aftersave").click(function(){a.cancel.AV_bindInst(a)();a.messager.hide("avpw_aviary_beensaved");return!1});var b=function(){a.toolsPager.changePage(!0);a.showView("main");a.setPanelMode(null);return!1};avpw$("#avpw_tool_options_container").delegate("#avpw_all_effects","click",function(){a.paintWidget.actions.isACheckpoint()||
a.paintWidget.actions.undoToCheckpoint();a.paintWidget.actions.truncate();a.moduleNotify(a.curMode,"cancel");return b()});avpw$("#avpw_apply_container").click(function(){return!1!==a.moduleNotify(a.curMode,"commit")?(a.paintWidget.actions.setCheckpoint(!0),a.paintWidget.actions.truncate(),b()):!1});avpw$("#avpw_close_save").click(function(){a.messager.hide("avpw_aviary_quitareyousure",a.onSaveButtonClicked.AV_bindInst(a));return!1});avpw$("#avpw_close_nosave").click(function(){AV.paintWidgetCloser();
return!1});avpw$("#avpw_close_unsupported").click(function(){AV.paintWidgetCloser();return!1});avpw$("#avpw_history_undo").click(function(){a.paintWidget.actions.isACheckpoint()?a.undoToCheckpoint():a.undo()});avpw$("#avpw_history_redo").click(function(){a.redoToCheckpoint()||a.redo()});avpw$(".avpw_prev").bind("mousedown",function(){avpw$(this).addClass("avpw_prev_down")}).bind("mouseup",function(){avpw$(this).removeClass("avpw_prev_down")});avpw$(".avpw_next").bind("mousedown",function(){avpw$(this).addClass("avpw_next_down")}).bind("mouseup",
function(){avpw$(this).removeClass("avpw_next_down")})};
AV.ControlsWidget.prototype.unbindControls=function(){avpw$(window).unbind("resize",this.windowResized);avpw$("#avpw_controls").unbind("mousedown");AV.launchData.debug&&avpw$("#avpw_logo").unbind();avpw$(".avpw_button").unbind("mousedown");avpw$(".avpw_tool_icon").unbind("mousedown");avpw$(".avpw_checkmark_button .avpw_inset_button").unbind("mousedown");avpw$("#avpw_save_button").unbind("click");avpw$("#avpw_control_cancel_pane_inner").unbind("click");avpw$("#avpw_control_main_scrolling_region").undelegate(".avpw_tool_icon",
"click");avpw$("#avpw_resume_editing").unbind();avpw$("#avpw_tool_options_container").undelegate("#avpw_all_effects","click");avpw$("#avpw_apply_container").unbind("click");avpw$("#avpw_changes_resume").unbind("click");avpw$("#avpw_changes_discard").unbind("click");avpw$("#avpw_close_nosave").unbind();avpw$("#avpw_close_save").unbind();avpw$("#avpw_close_unsupported").unbind();avpw$("#avpw_resume_aftersave").unbind("click");avpw$("#avpw_close_aftersave").unbind("click");avpw$("#avpw_history_undo").unbind("click");
avpw$("#avpw_history_redo").unbind("click");avpw$(".avpw_prev").unbind("mousedown").unbind("mouseup");avpw$(".avpw_next").unbind("mousedown").unbind("mouseup");this.brushPreview&&this.brushPreview.destroy()};
AV.ControlsWidget.prototype.showView=function(a,b){var c;return function(i){var d=b.getElementById("avpw_tool_main_container"),f=b.getElementById("avpw_tool_options_container"),h=avpw$("#avpw_controls");c&&(a.clearTimeout(c),c=void 0);switch(i){case "editpanel":h.removeClass("avpw_main_mode");c=a.setTimeout(function(){d.style.display="none";f.style.display="block";AV.util.nextFrame(function(){h.addClass("avpw_editpanel_mode")})},200);break;case "main":h.removeClass("avpw_editpanel_mode"),c=a.setTimeout(function(){f.style.display=
"none";d.style.display="block";AV.util.nextFrame(function(){h.addClass("avpw_main_mode")})},200)}}}(window,document);
AV.ControlsWidget.prototype.brushPreview=function(a){var b,c,i,d;return{show:function(f,h){if(!AV.featherUseFlash){if(!b||!b.length)b=avpw$(AV.template[AV.launchData.layout].brushPreviewOverlay()),c=b.find(".avpw_brush_preview_display"),avpw$("#avpw_controls").append(b);h?AV.controlsWidgetInstance._drawUICircle(c,f,h,h):AV.controlsWidgetInstance._drawUICircle(c,f,"#fff");b.removeClass("avpw_brush_preview_visible");b.removeClass("avpw_brush_preview_fadeout");b.show();a.clearTimeout(i);a.clearTimeout(d);
AV.util.nextFrame(function(){b.addClass("avpw_brush_preview_visible");i=a.setTimeout(function(){b.removeClass("avpw_brush_preview_visible");b.addClass("avpw_brush_preview_fadeout")},1100);d=a.setTimeout(function(){b.hide()},1500)})}},destroy:function(){a.clearTimeout(i);a.clearTimeout(d);b&&b.length&&b.remove();i=d=c=b=null}}}(window);
